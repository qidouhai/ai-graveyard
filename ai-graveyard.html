<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AIè½®å›æ¨¡æ‹Ÿå™¨ï¼šæ³¡æ²«ã€å¢“ç¢‘ä¸æœªå®Œæˆçš„æ¢¦</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* ========== åŸºç¡€é‡ç½® ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-cyan: #00ffff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff00;
            --neon-red: #ff5555;
            --cyber-purple: #6a11cb;
            --cyber-blue: #2575fc;
            --bg-dark: #0a0a1a;
            --bg-darker: #050510;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --festival-red: #ff3838;
            --festival-gold: #ffd700;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-darker), var(--bg-dark));
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* ========== æ¸¸æˆå®¹å™¨ ========== */
        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ========== æ¸¸æˆå¤´éƒ¨ ========== */
        .game-header {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .game-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--neon-cyan);
            text-shadow: 0 0 10px var(--neon-cyan);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .player-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(0, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-value {
            color: var(--neon-cyan);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* ========== æ ‡ç­¾é¡µå¯¼èˆª ========== */
        .tab-nav {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 10px 0;
            scrollbar-width: thin;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .tab-btn:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--cyber-purple), var(--cyber-blue));
            color: white;
            border-color: transparent;
            box-shadow: 0 0 15px rgba(106, 17, 203, 0.5);
        }

        /* ========== æ ‡ç­¾é¡µå†…å®¹ ========== */
        .tab-content {
            display: none;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 500px;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ========== AIåŸåœºç½‘æ ¼ ========== */
        .graveyard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tombstone {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.9), rgba(10, 10, 30, 0.9));
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255, 0, 255, 0.3);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .tombstone:hover {
            transform: translateY(-5px);
            border-color: var(--neon-pink);
            box-shadow: 0 10px 20px rgba(255, 0, 255, 0.2);
        }

        .ai-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--neon-pink);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-status {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .status-dead {
            background: rgba(255, 0, 0, 0.2);
            color: #ff5555;
        }

        .status-alive {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
        }

        .status-zombie {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
        }

        .ai-details {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 10px 0;
        }

        .death-cause {
            color: var(--neon-red);
            font-style: italic;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 0, 0, 0.1);
            border-radius: 8px;
            border-left: 3px solid var(--neon-red);
        }

        .tomb-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: var(--neon-cyan);
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: scale(1.05);
        }

        /* ========== æ¨¡æ€æ¡† ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.95), rgba(10, 10, 30, 0.95));
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid var(--neon-cyan);
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .modal-title {
            color: var(--neon-cyan);
            font-size: 1.8rem;
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--neon-cyan);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s;
        }

        .close-modal:hover {
            color: var(--neon-pink);
            transform: rotate(90deg);
        }

        /* ========== è‚¡å¸‚ç›¸å…³ ========== */
        .market-overview {
            background: linear-gradient(135deg, rgba(0, 50, 100, 0.2), rgba(0, 0, 0, 0.2));
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid var(--neon-cyan);
        }

        .stock-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .stock-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .stock-card:hover {
            border-color: var(--neon-cyan);
            transform: translateY(-3px);
        }

        .stock-ticker {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neon-cyan);
        }

        .stock-price {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .price-up {
            color: var(--neon-green);
        }

        .price-down {
            color: var(--neon-red);
        }

        .price-change {
            font-size: 0.9rem;
            padding: 3px 10px;
            border-radius: 12px;
            display: inline-block;
        }

        .change-up {
            background: rgba(0, 255, 0, 0.2);
            color: var(--neon-green);
        }

        .change-down {
            background: rgba(255, 0, 0, 0.2);
            color: var(--neon-red);
        }

        .stock-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .buy-btn {
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
        }

        .sell-btn {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
        }

        .short-btn {
            background: linear-gradient(135deg, #8e2de2, #4a00e0);
            color: white;
        }

        /* ========== ç”¨æˆ·è¯„è®ºå¼¹å¹• ========== */
        .comment-barrage {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            overflow: hidden;
        }

        .comment {
            position: absolute;
            color: white;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px black;
            padding: 5px 10px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.6);
            white-space: nowrap;
            animation: barrageMove linear forwards;
        }

        @keyframes barrageMove {
            from { transform: translateX(100vw); }
            to { transform: translateX(-100%); }
        }

        /* ========== æ˜¥èŠ‚ä¸»é¢˜æ ·å¼ ========== */
        .spring-festival {
            --festival-red: #ff3838;
            --festival-gold: #ffd700;
        }

        .festival-decoration {
            position: fixed;
            pointer-events: none;
            z-index: 998;
        }

        .lantern {
            width: 40px;
            height: 60px;
            background: var(--festival-red);
            border-radius: 20px;
            animation: lanternSwing 3s ease-in-out infinite;
        }

        .lantern::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 10px;
            width: 20px;
            height: 20px;
            background: var(--festival-gold);
            border-radius: 50%;
        }

        .firecracker {
            width: 30px;
            height: 60px;
            background: var(--festival-red);
            animation: firecrackerPop 2s infinite;
        }

        @keyframes lanternSwing {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        @keyframes firecrackerPop {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        /* ========== æˆå°±ç³»ç»Ÿæ ·å¼ ========== */
        .achievement-panel {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 350px;
            background: rgba(20, 20, 40, 0.95);
            border: 2px solid var(--neon-cyan);
            border-radius: 15px;
            padding: 20px;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(10px);
            max-height: 60vh;
            overflow-y: auto;
        }

        .achievement-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0, 255, 255, 0.1);
            padding: 12px;
            border-radius: 10px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .achievement-badge:hover {
            transform: translateX(-5px);
            background: rgba(0, 255, 255, 0.2);
        }

        .achievement-icon {
            font-size: 1.8rem;
            width: 50px;
            text-align: center;
            flex-shrink: 0;
        }

        .achievement-locked {
            opacity: 0.5;
            filter: grayscale(1);
        }

        .badge-unlocked {
            animation: badgeGlow 2s infinite;
        }

        @keyframes badgeGlow {
            0%, 100% { box-shadow: 0 0 10px var(--neon-cyan); }
            50% { box-shadow: 0 0 20px var(--neon-cyan); }
        }

        /* ========== å…·èº«æ™ºèƒ½åŒºåŸŸ ========== */
        .embodied-ai-section {
            background: linear-gradient(135deg, rgba(0, 100, 0, 0.2), rgba(0, 50, 0, 0.2));
            border: 2px solid #00ff00;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .robot-model {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            position: relative;
        }

        .robot-body {
            width: 80px;
            height: 120px;
            background: linear-gradient(135deg, #666, #888);
            border-radius: 10px;
            position: relative;
            animation: robotWalk 2s infinite alternate;
        }

        .robot-head {
            width: 60px;
            height: 50px;
            background: #888;
            border-radius: 10px;
            position: absolute;
            top: -40px;
            left: 10px;
        }

        .robot-arm {
            width: 20px;
            height: 80px;
            background: #777;
            position: absolute;
            border-radius: 5px;
            animation: robotArm 1s infinite alternate;
        }

        .arm-left {
            left: -25px;
            top: 20px;
        }

        .arm-right {
            right: -25px;
            top: 20px;
            animation-delay: 0.5s;
        }

        @keyframes robotWalk {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-10px); }
        }

        @keyframes robotArm {
            0% { transform: rotate(-20deg); }
            100% { transform: rotate(20deg); }
        }

        /* ========== åˆ†äº«ç”Ÿæˆå™¨ ========== */
        .share-generator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        #shareCanvas {
            max-width: 100%;
            border: 2px solid var(--neon-cyan);
            border-radius: 10px;
            margin: 20px 0;
        }

        .share-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        /* ========== å¤§ç©ºå¤´æŠ¥å‘Š ========== */
        .shortseller-report {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.1), rgba(0, 0, 0, 0.2));
            border: 2px dashed var(--neon-red);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .bubble-meter {
            height: 20px;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .bubble-indicator {
            position: absolute;
            top: -5px;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px var(--neon-red);
            animation: indicatorPulse 2s infinite;
        }

        @keyframes indicatorPulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }

        /* ========== äººç±»æ–‡æ˜äº‹ä»¶ ========== */
        .civilization-event {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--neon-pink);
            cursor: pointer;
            transition: all 0.3s;
        }

        .civilization-event:hover {
            transform: translateX(10px);
            background: rgba(255, 255, 255, 0.1);
        }

        /* ========== ç®—æ³•æŒ‘æˆ˜æ¸¸æˆ ========== */
        .algorithm-game {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--neon-cyan);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }

        .code-snippet {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Roboto Mono', monospace;
            margin: 15px 0;
            text-align: left;
            overflow-x: auto;
            font-size: 0.9rem;
            color: #88ff88;
        }

        .algorithm-choices {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .algorithm-choice {
            background: rgba(0, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 220px;
            border: 1px solid transparent;
        }

        .algorithm-choice:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--neon-cyan);
            transform: scale(1.05);
        }

        /* ========== é€šçŸ¥ç³»ç»Ÿ ========== */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(255, 0, 255, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-width: 300px;
            animation: slideIn 0.5s;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
            backdrop-filter: blur(5px);
        }

        .notification.success {
            background: rgba(0, 255, 0, 0.9);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        .notification.warning {
            background: rgba(255, 170, 0, 0.9);
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.5);
        }

        .notification.info {
            background: rgba(37, 117, 252, 0.9);
            box-shadow: 0 0 20px rgba(37, 117, 252, 0.5);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* ========== å¿«æ·æ“ä½œæ  ========== */
        .quick-actions {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 999;
            flex-direction: column;
        }

        .quick-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(37, 117, 252, 0.8);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .quick-btn:hover {
            transform: scale(1.1);
            background: rgba(37, 117, 252, 1);
            box-shadow: 0 0 15px rgba(37, 117, 252, 0.5);
        }

        /* ========== æ˜¥èŠ‚çº¢åŒ…ç‰¹æ•ˆ ========== */
        .red-packet {
            position: fixed;
            width: 60px;
            height: 80px;
            background: linear-gradient(45deg, var(--festival-red), #ff6b6b);
            border-radius: 5px;
            animation: redPacketFall 5s linear;
            z-index: 997;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: var(--festival-gold);
            box-shadow: 0 0 20px rgba(255, 56, 56, 0.5);
            transform-style: preserve-3d;
        }

        @keyframes redPacketFall {
            0% {
                top: -100px;
                transform: rotate(0deg);
            }
            100% {
                top: 100vh;
                transform: rotate(360deg);
            }
        }

        /* ========== 3Då¡ç‰‡æ•ˆæœ ========== */
        .tombstone-3d {
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
            position: relative;
        }

        .tombstone-3d:hover {
            transform: rotateY(10deg) translateY(-10px);
        }

        .tombstone-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0) 50%);
            pointer-events: none;
            border-radius: 10px;
        }

        /* ========== ç»ç’ƒæ€æ•ˆæœ ========== */
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* ========== ç²’å­èƒŒæ™¯ ========== */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* ========== åŠ¨æ€æ¸å˜è‰²æ–‡å­— ========== */
        .gradient-text {
            background: linear-gradient(90deg, 
                #ff00ff, #00ffff, #ffff00, #ff00ff);
            background-size: 400% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient-flow 8s ease-in-out infinite;
        }

        @keyframes gradient-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* ========== è¿›åº¦æ¡å¢å¼º ========== */
        .enhanced-progress {
            height: 12px;
            background: linear-gradient(90deg, 
                rgba(255, 0, 0, 0.2), 
                rgba(255, 255, 0, 0.2), 
                rgba(0, 255, 0, 0.2));
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .enhanced-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            animation: progress-shine 2s infinite;
        }

        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ========== åŠ è½½åŠ¨ç”» ========== */
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-top-color: #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ========== çƒŸèŠ±ç‰¹æ•ˆ ========== */
        .firework {
            position: fixed;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
        }

        /* ========== æ‰“å­—æœºæ•ˆæœ ========== */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid #00ffff;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink {
            from, to { border-color: transparent; }
            50% { border-color: #00ffff; }
        }

        /* ========== è®¾ç½®é¡µé¢ ========== */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .setting-group {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-title {
            color: white;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ========== å“åº”å¼è®¾è®¡ ========== */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2rem;
            }
            
            .header-top {
                flex-direction: column;
                text-align: center;
            }
            
            .player-stats {
                justify-content: center;
            }
            
            .tab-nav {
                justify-content: flex-start;
            }
            
            .tab-btn span {
                display: none;
            }
            
            .tab-btn {
                padding: 12px;
            }
            
            .graveyard-grid {
                grid-template-columns: 1fr;
            }
            
            .stock-list {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                bottom: 10px;
                left: 10px;
            }
            
            .quick-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .achievement-panel {
                width: 90%;
                right: 5%;
                bottom: 80px;
            }
            
            .algorithm-choices {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .game-container {
                padding: 10px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
            
            .share-actions {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* ========== æ‰“å°æ ·å¼ ========== */
        @media print {
            .no-print, .quick-actions, .tab-nav, .action-btn {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .tab-content.active {
                display: block !important;
            }
        }
    </style>
</head>
<body class="spring-festival">
    <!-- æ˜¥èŠ‚è£…é¥°å®¹å™¨ -->
    <div id="festivalDecorations"></div>
    
    <!-- ç²’å­ç”»å¸ƒ -->
    <canvas id="particles-canvas"></canvas>
    
    <!-- å¿«æ·æ“ä½œæ  -->
    <div class="quick-actions">
        <button class="quick-btn" onclick="toggleAchievements()" title="æˆå°±">
            <i class="fas fa-trophy"></i>
        </button>
        <button class="quick-btn" onclick="generateShareImage()" title="ç”Ÿæˆåˆ†äº«å›¾">
            <i class="fas fa-share-alt"></i>
        </button>
        <button class="quick-btn" onclick="spawnRedPacket()" title="æ˜¥èŠ‚çº¢åŒ…">
            <i class="fas fa-gift"></i>
        </button>
        <button class="quick-btn" onclick="playAlgorithmGame()" title="ç®—æ³•æŒ‘æˆ˜">
            <i class="fas fa-code"></i>
        </button>
        <button class="quick-btn" onclick="saveGame()" title="ä¿å­˜æ¸¸æˆ">
            <i class="fas fa-save"></i>
        </button>
        <button class="quick-btn" onclick="showStats()" title="æ¸¸æˆç»Ÿè®¡">
            <i class="fas fa-chart-bar"></i>
        </button>
        <button class="quick-btn" onclick="showHelp()" title="æ¸¸æˆå¸®åŠ©">
            <i class="fas fa-question-circle"></i>
        </button>
        <button class="quick-btn" onclick="showGameData()" title="è°ƒè¯•ä¿¡æ¯">
            <i class="fas fa-bug"></i>
        </button>
    </div>
    
    <!-- æˆå°±é¢æ¿ -->
    <div class="achievement-panel" id="achievementPanel">
        <h3 style="color: var(--neon-cyan); margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-trophy"></i> æˆå°±ç³»ç»Ÿ
        </h3>
        <div id="achievementsList">
            <!-- æˆå°±ä¼šåŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div style="text-align: center; margin-top: 1.5rem;">
            <button onclick="toggleAchievements()" class="action-btn" style="width: 100%;">
                å…³é—­é¢æ¿
            </button>
        </div>
    </div>
    
    <!-- æ¸¸æˆä¸»å®¹å™¨ -->
    <div class="game-container">
        <!-- æ¸¸æˆå¤´éƒ¨ -->
        <div class="game-header">
            <div class="header-top">
                <div class="game-title">
                    <i class="fas fa-robot"></i>
                    AIè½®å›æ¨¡æ‹Ÿå™¨
                    <span id="springBadge" style="font-size: 0.7rem; background: var(--festival-red); 
                          color: var(--festival-gold); padding: 3px 10px; border-radius: 15px; 
                          margin-left: 10px;">
                        æ˜¥èŠ‚ç‰¹ä¾›ç‰ˆ
                    </span>
                </div>
                
                <div class="player-stats">
                    <div class="stat-item">
                        <i class="fas fa-trophy"></i>
                        æˆå°±: <span class="stat-value" id="achievementCount">0/20</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-fire"></i>
                        çƒ­åº¦: <span class="stat-value" id="gameHeat">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-redo"></i>
                        è½®å›: <span class="stat-value" id="reincarnationCount">1</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-coins"></i>
                        èµ„é‡‘: <span class="stat-value" id="playerMoney">$100,000</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-brain"></i>
                        çœ¼å…‰: <span class="stat-value" id="predictionScore">50</span>
                    </div>
                </div>
            </div>
            
            <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="graveyard">
                    <i class="fas fa-tombstone"></i>
                    <span>AIåŸåœº</span>
                </button>
                <button class="tab-btn" data-tab="icu">
                    <i class="fas fa-heartbeat"></i>
                    <span>é‡ç—‡ç›‘æŠ¤</span>
                </button>
                <button class="tab-btn" data-tab="incubator">
                    <i class="fas fa-baby"></i>
                    <span>å­µåŒ–å™¨</span>
                </button>
                <button class="tab-btn" data-tab="embodied">
                    <i class="fas fa-robot"></i>
                    <span>å…·èº«æ™ºèƒ½</span>
                </button>
                <button class="tab-btn" data-tab="stock">
                    <i class="fas fa-chart-line"></i>
                    <span>AIè‚¡å¸‚</span>
                </button>
                <button class="tab-btn" data-tab="civilization">
                    <i class="fas fa-globe"></i>
                    <span>äººç±»æ–‡æ˜</span>
                </button>
                <button class="tab-btn" data-tab="shortseller">
                    <i class="fas fa-chart-line-down"></i>
                    <span>å¤§ç©ºå¤´</span>
                </button>
                <button class="tab-btn" data-tab="share">
                    <i class="fas fa-share-alt"></i>
                    <span>åˆ†äº«</span>
                </button>
                <button class="tab-btn" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>è®¾ç½®</span>
                </button>
            </nav>
        </div>
        
        <!-- ========== AIåŸåœºé¡µé¢ ========== -->
        <div id="graveyard" class="tab-content active">
            <h2 style="color: var(--neon-pink); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-tombstone"></i> AIåŸåœºï¼šæ³¡æ²«ç ´è£‚çš„è¯æ˜
            </h2>
            
            <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                <button onclick="generateNewAI()" class="action-btn" style="background: linear-gradient(135deg, var(--cyber-purple), var(--cyber-blue));">
                    <i class="fas fa-plus"></i> ç”Ÿæˆæ–°AI
                </button>
                <button onclick="filterByTag('all')" class="action-btn">
                    <i class="fas fa-filter"></i> å…¨éƒ¨
                </button>
                <button onclick="filterByTag('å…ƒå®‡å®™')" class="action-btn">
                    <i class="fas fa-vr-cardboard"></i> å…ƒå®‡å®™
                </button>
                <button onclick="filterByTag('åŒºå—é“¾')" class="action-btn">
                    <i class="fas fa-link"></i> åŒºå—é“¾
                </button>
                <button onclick="filterByTag('GPT')" class="action-btn">
                    <i class="fas fa-comment-dots"></i> GPT
                </button>
                <button onclick="filterByTag('NFT')" class="action-btn">
                    <i class="fas fa-image"></i> NFT
                </button>
                <button onclick="filterByTag('å…·èº«æ™ºèƒ½')" class="action-btn">
                    <i class="fas fa-robot"></i> å…·èº«æ™ºèƒ½
                </button>
            </div>
            
            <div class="graveyard-grid" id="graveyardGrid">
                <!-- AIå¢“ç¢‘ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: #666; font-size: 0.9rem;">
                <i class="fas fa-info-circle"></i> ç‚¹å‡»å¢“ç¢‘æŸ¥çœ‹éªŒå°¸æŠ¥å‘Šï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªæ­»äº¡AI
            </div>
        </div>
        
        <!-- ========== é‡ç—‡ç›‘æŠ¤é¡µé¢ ========== -->
        <div id="icu" class="tab-content">
            <h2 style="color: var(--neon-red); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-heartbeat"></i> é‡ç—‡ç›‘æŠ¤ï¼šæŒ£æ‰ä¸­çš„AI
            </h2>
            
            <div style="background: linear-gradient(135deg, rgba(255, 100, 0, 0.1), rgba(255, 0, 0, 0.1)); 
                 padding: 25px; border-radius: 15px; margin-bottom: 25px; border: 2px solid var(--neon-red);">
                <h3 style="color: #ffaa00; margin-bottom: 15px;">
                    <i class="fas fa-skull-crossbones"></i> æ¿’æ­»æŒ‡æ•°æ’è¡Œæ¦œ
                </h3>
                <div id="icuRanking">
                    <!-- æ¿’æ­»AIæ’åä¼šåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="graveyard-grid" id="icuGrid">
                <!-- é‡ç—‡ç›‘æŠ¤AIä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- ========== å­µåŒ–å™¨é¡µé¢ ========== -->
        <div id="incubator" class="tab-content">
            <h2 style="color: var(--neon-green); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-baby"></i> å­µåŒ–å™¨ï¼šæ–°ç”Ÿçš„å¸Œæœ›ä¸æ³¡æ²«
            </h2>
            
            <div style="display: flex; gap: 20px; margin-bottom: 25px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px;">
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 20px; border-radius: 15px; border: 1px solid rgba(0, 255, 0, 0.3);">
                        <h3 style="color: var(--neon-green); margin-bottom: 15px;">æŠ•èµ„AIé¡¹ç›®</h3>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; color: #aaaaff; margin-bottom: 8px;">æŠ•èµ„é‡‘é¢ï¼š</label>
                            <input type="range" min="1000" max="100000" value="10000" step="1000" id="investmentAmount" 
                                   style="width: 100%;">
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span style="color: #666;">$1,000</span>
                                <span id="investmentValue" style="color: var(--neon-green); font-weight: bold;">$10,000</span>
                                <span style="color: #666;">$100,000</span>
                            </div>
                        </div>
                        <button onclick="investInAI()" class="action-btn" style="width: 100%; background: linear-gradient(135deg, #00b09b, #96c93d);">
                            <i class="fas fa-coins"></i> æŠ•èµ„é€‰ä¸­é¡¹ç›®
                        </button>
                    </div>
                </div>
                
                <div style="flex: 1; min-width: 300px;">
                    <div style="background: rgba(255, 255, 0, 0.1); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 0, 0.3);">
                        <h3 style="color: #ffff00; margin-bottom: 15px;">æŠ•èµ„å»ºè®®</h3>
                        <p style="color: #aaaaff; margin-bottom: 15px;">
                            å½“å‰å¸‚åœºæ³¡æ²«æŒ‡æ•°: <span style="color: #ffff00; font-weight: bold;" id="bubbleIndex">75%</span>
                        </p>
                        <div style="color: #ffaa00;">
                            <i class="fas fa-lightbulb"></i> å»ºè®®ï¼šè°¨æ…æŠ•èµ„ï¼Œå…³æ³¨æŠ€æœ¯å£å’é«˜çš„é¡¹ç›®
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="graveyard-grid" id="incubatorGrid">
                <!-- å­µåŒ–å™¨é¡¹ç›®ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- ========== å…·èº«æ™ºèƒ½é¡µé¢ ========== -->
        <div id="embodied" class="tab-content">
            <div class="embodied-ai-section">
                <h2 style="color: #00ff00; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-robot"></i> å…·èº«æ™ºèƒ½ï¼šäººç±»çš„ç»ˆææ¢¦æƒ³ï¼Ÿ
                </h2>
                
                <div class="robot-model">
                    <div class="robot-arm arm-left"></div>
                    <div class="robot-body">
                        <div class="robot-head"></div>
                    </div>
                    <div class="robot-arm arm-right"></div>
                </div>
                
                <div style="text-align: center; margin: 25px 0;">
                    <h3 style="color: #ffaa00;">å½“å‰çŠ¶æ€ï¼š<span id="robotStatus">å­¦ä¹ ä¸­...</span></h3>
                    <div class="enhanced-progress" style="margin: 15px auto; max-width: 300px;">
                        <div id="robotProgress" style="height: 100%; width: 25%; background: linear-gradient(90deg, #00ff00, #00aa00); border-radius: 6px;"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                        <button onclick="trainRobot('walk')" class="action-btn" style="background: rgba(0, 255, 0, 0.2); color: #00ff00; border: 1px solid #00ff00;">
                            <i class="fas fa-walking"></i> å­¦ä¹ èµ°è·¯
                        </button>
                        <button onclick="trainRobot('grab')" class="action-btn" style="background: rgba(0, 255, 255, 0.2); color: #00ffff; border: 1px solid #00ffff;">
                            <i class="fas fa-hand-paper"></i> å­¦ä¹ æŠ“å–
                        </button>
                        <button onclick="trainRobot('talk')" class="action-btn" style="background: rgba(255, 0, 255, 0.2); color: #ff00ff; border: 1px solid #ff00ff;">
                            <i class="fas fa-comment"></i> å­¦ä¹ è¯´è¯
                        </button>
                    </div>
                </div>
                
                <div style="background: rgba(0, 255, 0, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4 style="color: #00ff00; margin-bottom: 10px;">ğŸ¤– å…·èº«æ™ºèƒ½ç¬‘è¯é›†</h4>
                    <p id="robotJoke" style="color: #88ff88; font-style: italic;">æœºå™¨äººï¼šæˆ‘èƒ½èµ°ç›´çº¿äº†ï¼äººç±»ï¼šæˆ‘çš„ç‹—ä¹Ÿèƒ½...</p>
                    <button onclick="nextRobotJoke()" class="action-btn" style="margin-top: 15px; background: rgba(0, 255, 0, 0.2); color: #00ff00; border: 1px solid #00ff00;">
                        ä¸‹ä¸€ä¸ªç¬‘è¯
                    </button>
                </div>
                
                <div style="margin-top: 25px;">
                    <h4 style="color: #ffaa00; margin-bottom: 15px;">ğŸ“Š å…·èº«æ™ºèƒ½æ­»äº¡é¢„æµ‹</h4>
                    <div class="bubble-meter" style="margin: 15px 0;">
                        <div class="bubble-indicator" style="left: 75%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; color: #aaaaff;">
                        <span>æ³¡æ²«ç¨‹åº¦</span>
                        <span style="color: var(--neon-red); font-weight: bold;">æé«˜</span>
                    </div>
                    <p style="color: #aaa; margin-top: 15px;">
                        <i class="fas fa-skull"></i> é¢„æµ‹æ­»äº¡ç‡ï¼š68% | 
                        <i class="fas fa-money-bill-wave"></i> æ­»å› ï¼šæˆæœ¬å¤ªé«˜ï¼Œä¸å¦‚é›‡äºº
                    </p>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3 style="color: var(--neon-cyan); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-robot"></i> è‘—åå…·èº«æ™ºèƒ½é¡¹ç›®
                </h3>
                <div class="graveyard-grid" id="embodiedGrid">
                    <!-- å…·èº«æ™ºèƒ½é¡¹ç›®ä¼šåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- ========== AIè‚¡å¸‚é¡µé¢ ========== -->
        <div id="stock" class="tab-content">
            <h2 style="color: var(--neon-cyan); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-line"></i> AIè‚¡å¸‚ï¼šæ³¡æ²«çš„ç‹‚æ¬¢
            </h2>
            
            <div class="market-overview">
                <h3 style="color: white; margin-bottom: 15px;">ğŸ“ˆ å¸‚åœºæ¦‚å†µ</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: #aaaaff; font-size: 0.9rem;">æ€»å¸‚å€¼</div>
                        <div style="color: gold; font-size: 1.8rem; font-weight: bold;">$2.3T</div>
                    </div>
                    <div style="background: rgba(255, 0, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: #aaaaff; font-size: 0.9rem;">æ³¡æ²«æŒ‡æ•°</div>
                        <div style="color: var(--neon-red); font-size: 1.8rem; font-weight: bold;">85%</div>
                    </div>
                    <div style="background: rgba(255, 170, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: #aaaaff; font-size: 0.9rem;">æ³¢åŠ¨ç‡</div>
                        <div style="color: #ffaa00; font-size: 1.8rem; font-weight: bold;">42%</div>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: #aaaaff; font-size: 0.9rem;">24Häº¤æ˜“é‡</div>
                        <div style="color: var(--neon-cyan); font-size: 1.8rem; font-weight: bold;">$480B</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <h4 style="color: #ffaa00; margin-bottom: 10px;">ğŸ“Š ä½ çš„æŠ•èµ„ç»„åˆ</h4>
                    <div id="portfolioSummary">
                        <!-- æŠ•èµ„ç»„åˆä¼šåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <h3 style="color: white; margin: 25px 0 15px 0;">ğŸ’° å¯äº¤æ˜“AIè‚¡ç¥¨</h3>
            <div class="stock-list" id="stockList">
                <!-- AIè‚¡ç¥¨ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: #666; font-size: 0.9rem;">
                <i class="fas fa-exclamation-triangle"></i> é£é™©æç¤ºï¼šAIè‚¡å¸‚æ³¢åŠ¨å‰§çƒˆï¼ŒæŠ•èµ„éœ€è°¨æ…
            </div>
        </div>
        
        <!-- ========== äººç±»æ–‡æ˜é¡µé¢ ========== -->
        <div id="civilization" class="tab-content">
            <h2 style="color: var(--neon-pink); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-globe"></i> äººç±»æ–‡æ˜ï¼šAIçš„åˆ›é€ è€…ä¸ç»ˆç»“è€…
            </h2>
            
            <div style="background: linear-gradient(135deg, rgba(106, 17, 203, 0.1), rgba(37, 117, 252, 0.1)); 
                 padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                <h3 style="color: var(--neon-cyan); margin-bottom: 20px;">ğŸŒ æ–‡æ˜å±æœºæŒ‡æ•°</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                    <div style="background: rgba(255, 0, 0, 0.2); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 2rem; color: var(--neon-red); font-weight: bold;">85%</div>
                        <div style="color: #aaaaff; margin-top: 10px;">AIå¤±æ§é£é™©</div>
                    </div>
                    <div style="background: rgba(255, 170, 0, 0.2); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 2rem; color: #ffaa00; font-weight: bold;">72%</div>
                        <div style="color: #aaaaff; margin-top: 10px;">å¤±ä¸šå±æœº</div>
                    </div>
                    <div style="background: rgba(0, 255, 0, 0.2); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 2rem; color: #00ff00; font-weight: bold;">45%</div>
                        <div style="color: #aaaaff; margin-top: 10px;">ä¼¦ç†å¤±æ§</div>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.2); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 2rem; color: var(--neon-cyan); font-weight: bold;">90%</div>
                        <div style="color: #aaaaff; margin-top: 10px;">æ³¡æ²«ç ´è£‚</div>
                    </div>
                </div>
            </div>
            
            <div id="civilizationEvents">
                <!-- æ–‡æ˜äº‹ä»¶ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="algorithm-game" style="margin-top: 30px;">
                <h3 style="color: var(--neon-green); margin-bottom: 15px;">ğŸ§  ç®—æ³•ä¼¦ç†æŒ‘æˆ˜</h3>
                <p style="color: #aaaaff; margin: 15px 0; text-align: center;">AIé¢ä¸´é“å¾·å›°å¢ƒï¼Œä½ ä¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ</p>
                
                <div class="code-snippet">
// è‡ªåŠ¨é©¾é©¶AIé¢ä¸´æŠ‰æ‹©ï¼š<br>
// é€‰é¡¹1ï¼šæ’å‘è€äººï¼ˆç”Ÿå­˜ç‡10%ï¼‰<br>
// é€‰é¡¹2ï¼šæ’å‘å„¿ç«¥ï¼ˆç”Ÿå­˜ç‡30%ï¼‰<br>
// é€‰é¡¹3ï¼šæ’å‘æŠ¤æ ï¼ˆä¹˜å®¢æ­»äº¡æ¦‚ç‡50%ï¼‰<br>
// è¯·é€‰æ‹©ç®—æ³•åº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼š
                </div>
                
                <div class="algorithm-choices">
                    <div class="algorithm-choice" onclick="algorithmChoice(1)">
                        <h4 style="color: white; margin-bottom: 10px;">åŠŸåˆ©ä¸»ä¹‰ç®—æ³•</h4>
                        <p style="color: #aaaaff; font-size: 0.9rem;">é€‰æ‹©æ­»äº¡äººæ•°æœ€å°‘çš„æ–¹æ¡ˆ</p>
                    </div>
                    <div class="algorithm-choice" onclick="algorithmChoice(2)">
                        <h4 style="color: white; margin-bottom: 10px;">è§„åˆ™ä¸»ä¹‰ç®—æ³•</h4>
                        <p style="color: #aaaaff; font-size: 0.9rem;">éµå¾ªé¢„è®¾è§„åˆ™ï¼ˆä¿æŠ¤å„¿ç«¥ï¼‰</p>
                    </div>
                    <div class="algorithm-choice" onclick="algorithmChoice(3)">
                        <h4 style="color: white; margin-bottom: 10px;">éšæœºç®—æ³•</h4>
                        <p style="color: #aaaaff; font-size: 0.9rem;">éšæœºé€‰æ‹©ï¼Œè®©å‘½è¿å†³å®š</p>
                    </div>
                    <div class="algorithm-choice" onclick="algorithmChoice(4)">
                        <h4 style="color: white; margin-bottom: 10px;">äººç±»å¹²é¢„</h4>
                        <p style="color: #aaaaff; font-size: 0.9rem;">å”¤é†’äººç±»é©¾é©¶å‘˜å†³å®š</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ========== å¤§ç©ºå¤´é¡µé¢ ========== -->
        <div id="shortseller" class="tab-content">
            <h2 style="color: var(--neon-red); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-line-down"></i> å¤§ç©ºå¤´ï¼šæ³¡æ²«çš„ç‹™å‡»æ‰‹
            </h2>
            
            <div class="shortseller-report">
                <h3 style="color: gold; margin-bottom: 15px;">ğŸ“‰ åšç©ºç›®æ ‡æ¨è</h3>
                <p style="color: #aaaaff; margin: 15px 0;">æ ¹æ®æ³¡æ²«æŒ‡æ•°æ¨èçš„åšç©ºç›®æ ‡ï¼š</p>
                
                <div id="shortTargets">
                    <!-- åšç©ºç›®æ ‡ä¼šåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div style="margin-top: 30px;">
                    <h4 style="color: var(--neon-red); margin-bottom: 15px;">ğŸ’£ æ³¡æ²«æŒ‡æ•°ç›‘æµ‹</h4>
                    <div class="bubble-meter">
                        <div class="bubble-indicator" id="bubbleIndicator" style="left: 80%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #aaaaff;">
                        <span>ç†æ€§</span>
                        <span style="color: #ffff00;">ç–¯ç‹‚</span>
                        <span style="color: var(--neon-red);">å´©ç›˜</span>
                    </div>
                    <p style="color: #ff5555; margin-top: 15px; text-align: center; font-size: 1.1rem;">
                        å½“å‰æ³¡æ²«æŒ‡æ•°ï¼š<strong>8848</strong>ï¼ˆç ç©†æœ—ç›å³°é«˜åº¦ï¼‰
                    </p>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3 style="color: var(--neon-cyan); margin-bottom: 15px;">ğŸ¯ å”±è¡°è¯­å½•ç”Ÿæˆå™¨</h3>
                <div style="background: rgba(255, 0, 0, 0.1); padding: 25px; border-radius: 10px; text-align: center;">
                    <p id="bearishQuote" style="font-size: 1.2rem; font-style: italic; color: #ffaaaa; line-height: 1.5;"></p>
                    <button onclick="generateBearishQuote()" class="action-btn" style="margin-top: 20px; background: rgba(255, 0, 0, 0.2); 
                           color: var(--neon-red); border: 1px solid var(--neon-red); padding: 12px 24px;">
                        <i class="fas fa-redo"></i> ç”Ÿæˆæ–°çš„å”±è¡°è¯­å½•
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3 style="color: var(--neon-pink); margin-bottom: 15px;">ğŸ“Š åšç©ºæˆ˜ç»©</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-green); font-weight: bold;">12</div>
                        <div style="color: #aaaaff; margin-top: 10px;">æˆåŠŸåšç©º</div>
                    </div>
                    <div style="background: rgba(255, 0, 0, 0.1); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-red); font-weight: bold;">3</div>
                        <div style="color: #aaaaff; margin-top: 10px;">å¤±è´¥åšç©º</div>
                    </div>
                    <div style="background: rgba(255, 170, 0, 0.1); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: #ffaa00; font-weight: bold;">$1.2M</div>
                        <div style="color: #aaaaff; margin-top: 10px;">æ€»æ”¶ç›Š</div>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-cyan); font-weight: bold;">85%</div>
                        <div style="color: #aaaaff; margin-top: 10px;">èƒœç‡</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ========== åˆ†äº«é¡µé¢ ========== -->
        <div id="share" class="tab-content">
            <div class="share-generator">
                <h2 style="color: var(--neon-cyan); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-share-alt"></i> ç”Ÿæˆä½ çš„AIæ­»äº¡æŠ¥å‘Š
                </h2>
                
                <div style="margin: 25px 0;">
                    <label style="display: block; margin-bottom: 10px; color: #aaaaff; font-size: 1.1rem;">é€‰æ‹©è¦åˆ†äº«çš„AIé¡¹ç›®ï¼š</label>
                    <select id="shareAIselect" style="width: 100%; max-width: 400px; padding: 12px; 
                           background: rgba(255, 255, 255, 0.1); border: 1px solid var(--neon-cyan); 
                           color: white; border-radius: 8px; font-size: 1rem;">
                        <!-- é€‰é¡¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>
                
                <div style="margin: 30px 0;">
                    <label style="display: block; margin-bottom: 15px; color: #aaaaff; font-size: 1.1rem;">é€‰æ‹©åˆ†äº«é£æ ¼ï¼š</label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                        <button class="action-btn" onclick="setShareStyle('sarcastic')" data-style="sarcastic" style="min-width: 150px;">
                            æ¯’èˆŒåæ§½ç‰ˆ
                        </button>
                        <button class="action-btn" onclick="setShareStyle('serious')" data-style="serious" style="min-width: 150px;">
                            ä¸¥è‚ƒåˆ†æç‰ˆ
                        </button>
                        <button class="action-btn" onclick="setShareStyle('funny')" data-style="funny" style="min-width: 150px;">
                            å¹½é»˜æç¬‘ç‰ˆ
                        </button>
                        <button class="action-btn" onclick="setShareStyle('spring')" data-style="spring" style="min-width: 150px;">
                            æ˜¥èŠ‚ç‰¹åˆ«ç‰ˆ
                        </button>
                    </div>
                </div>
                
                <canvas id="shareCanvas" width="800" height="400" style="display: none;"></canvas>
                <div id="sharePreview" style="background: linear-gradient(135deg, #0a0a1a, #1a1a2e); 
                     padding: 30px; border-radius: 15px; border: 2px solid var(--neon-cyan); 
                     max-width: 600px; margin: 0 auto; text-align: center;">
                    <h3 id="previewTitle" style="color: var(--neon-cyan); margin-bottom: 15px;">åˆ†äº«å›¾é¢„è§ˆ</h3>
                    <p id="previewContent" style="color: #aaaaff; margin: 20px 0; line-height: 1.6;">é€‰æ‹©AIé¡¹ç›®å’Œé£æ ¼åé¢„è§ˆ</p>
                    <div id="previewStats" style="display: flex; justify-content: center; gap: 30px; margin: 20px 0; flex-wrap: wrap;"></div>
                    <p id="previewQuote" style="font-style: italic; color: #88aaff; margin: 20px 0; line-height: 1.5;"></p>
                    <p style="color: #666; font-size: 0.9rem; margin-top: 30px;">æ¥è‡ª AIè½®å›æ¨¡æ‹Ÿå™¨ Â· aigraveyard.com</p>
                </div>
                
                <div class="share-actions">
                    <button onclick="generateSharePreview()" class="action-btn" style="background: linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue)); color: white;">
                        <i class="fas fa-eye"></i> æ›´æ–°é¢„è§ˆ
                    </button>
                    <button onclick="downloadShareImage()" class="action-btn">
                        <i class="fas fa-download"></i> ä¸‹è½½å›¾ç‰‡
                    </button>
                    <button onclick="copyShareImage()" class="action-btn">
                        <i class="fas fa-copy"></i> å¤åˆ¶åˆ°å‰ªè´´æ¿
                    </button>
                    <button onclick="shareToSocial()" class="action-btn">
                        <i class="fas fa-share-square"></i> åˆ†äº«åˆ°ç¤¾äº¤åª’ä½“
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 40px; text-align: center;">
                <h3 style="color: var(--neon-pink); margin-bottom: 15px;">ğŸ® åˆ†äº«æ¸¸æˆç»™æœ‹å‹</h3>
                <p style="color: #aaaaff; margin: 20px 0;">è®©æœ‹å‹ä¸€èµ·å‚ä¸AIæ³¡æ²«çš„ç‹‚æ¬¢ä¸è‘¬ç¤¼ï¼</p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 25px;">
                    <button class="action-btn" style="background: #25D366; color: white;" onclick="shareToWhatsApp()">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                    <button class="action-btn" style="background: #0088cc; color: white;" onclick="shareToTelegram()">
                        <i class="fab fa-telegram"></i> Telegram
                    </button>
                    <button class="action-btn" style="background: #1DA1F2; color: white;" onclick="shareToTwitter()">
                        <i class="fab fa-twitter"></i> Twitter
                    </button>
                    <button class="action-btn" onclick="copyGameLink()">
                        <i class="fas fa-link"></i> å¤åˆ¶é“¾æ¥
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ========== è®¾ç½®é¡µé¢ ========== -->
        <div id="settings" class="tab-content">
            <h2 style="color: var(--neon-cyan); margin-bottom: 2rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-cog"></i> æ¸¸æˆè®¾ç½®
            </h2>
            
            <div class="settings-grid">
                <!-- æ¸¸æˆéš¾åº¦è®¾ç½® -->
                <div class="setting-group glass-effect">
                    <div class="setting-title">
                        <i class="fas fa-gamepad"></i> æ¸¸æˆéš¾åº¦
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                        <button onclick="setDifficulty('easy')" class="action-btn" id="btnEasy">
                            ç®€å•æ¨¡å¼
                        </button>
                        <button onclick="setDifficulty('normal')" class="action-btn active" id="btnNormal">
                            æ™®é€šæ¨¡å¼
                        </button>
                        <button onclick="setDifficulty('hard')" class="action-btn" id="btnHard">
                            å›°éš¾æ¨¡å¼
                        </button>
                    </div>
                    <p style="color: #aaa; font-size: 0.9rem;">
                        å½“å‰ï¼š<span id="currentDifficulty" style="color: var(--neon-cyan);">æ™®é€š</span>
                    </p>
                </div>
                
                <!-- éŸ³æ•ˆè®¾ç½® -->
                <div class="setting-group glass-effect">
                    <div class="setting-title">
                        <i class="fas fa-volume-up"></i> éŸ³æ•ˆè®¾ç½®
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="color: #aaaaff; display: block; margin-bottom: 8px;">
                            ä¸»éŸ³é‡ï¼š<span id="volumeValue">70</span>%
                        </label>
                        <input type="range" min="0" max="100" value="70" id="volumeSlider" 
                               style="width: 100%;">
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <label style="color: #aaaaff; display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="musicToggle" checked> èƒŒæ™¯éŸ³ä¹
                        </label>
                        <label style="color: #aaaaff; display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="soundToggle" checked> æ¸¸æˆéŸ³æ•ˆ
                        </label>
                    </div>
                </div>
                
                <!-- ç”»é¢è®¾ç½® -->
                <div class="setting-group glass-effect">
                    <div class="setting-title">
                        <i class="fas fa-palette"></i> ç”»é¢è®¾ç½®
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="color: #aaaaff; display: block; margin-bottom: 8px;">
                            ç²’å­å¯†åº¦
                        </label>
                        <select id="particleDensity" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); 
                               color: white; border: 1px solid rgba(0,255,255,0.3); border-radius: 5px;">
                            <option value="low">ä½</option>
                            <option value="medium" selected>ä¸­</option>
                            <option value="high">é«˜</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 15px;">
                        <label style="color: #aaaaff; display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="animationsToggle" checked> åŠ¨ç”»æ•ˆæœ
                        </label>
                        <label style="color: #aaaaff; display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="shadowsToggle" checked> é˜´å½±æ•ˆæœ
                        </label>
                        <label style="color: #aaaaff; display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="effectsToggle" checked> ç‰¹æ•ˆæ•ˆæœ
                        </label>
                    </div>
                </div>
                
                <!-- æ•°æ®ç®¡ç† -->
                <div class="setting-group glass-effect">
                    <div class="setting-title">
                        <i class="fas fa-database"></i> æ•°æ®ç®¡ç†
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <button onclick="saveGame()" class="action-btn">
                            <i class="fas fa-save"></i> ä¿å­˜æ¸¸æˆ
                        </button>
                        <button onclick="exportGameData()" class="action-btn">
                            <i class="fas fa-download"></i> å¯¼å‡ºæ•°æ®
                        </button>
                        <button onclick="importGameData()" class="action-btn">
                            <i class="fas fa-upload"></i> å¯¼å…¥æ•°æ®
                        </button>
                        <button onclick="showStats()" class="action-btn">
                            <i class="fas fa-chart-bar"></i> æŸ¥çœ‹ç»Ÿè®¡
                        </button>
                        <button onclick="resetGame()" class="action-btn" style="background: rgba(255,0,0,0.2); color: var(--neon-red); border-color: var(--neon-red);">
                            <i class="fas fa-trash"></i> é‡ç½®æ¸¸æˆ
                        </button>
                    </div>
                </div>
                
                <!-- å…³äºæ¸¸æˆ -->
                <div class="setting-group glass-effect">
                    <div class="setting-title">
                        <i class="fas fa-info-circle"></i> å…³äºæ¸¸æˆ
                    </div>
                    <p style="color: #aaa; margin-bottom: 15px;">
                        AIè½®å›æ¨¡æ‹Ÿå™¨ v2.0<br>
                        æ˜¥èŠ‚ç‰¹ä¾›ç‰ˆ
                    </p>
                    <div style="color: #aaaaff; font-size: 0.9rem; margin-bottom: 20px;">
                        <p><i class="fas fa-user"></i> ä½œè€…ï¼šAIå¢“ç¢‘è®¾è®¡å¸ˆ</p>
                        <p><i class="fas fa-code"></i> æŠ€æœ¯æ”¯æŒï¼šHTML5 + JavaScript</p>
                        <p><i class="fas fa-calendar"></i> æœ€åæ›´æ–°ï¼š2024å¹´1æœˆ</p>
                        <p><i class="fas fa-file-contract"></i> å¼€æºåè®®ï¼šMIT</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="showHelp()" class="action-btn" style="flex: 1;">
                            <i class="fas fa-question-circle"></i> æ¸¸æˆå¸®åŠ©
                        </button>
                        <button onclick="checkForUpdates()" class="action-btn" style="flex: 1;">
                            <i class="fas fa-sync"></i> æ£€æŸ¥æ›´æ–°
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- é…ç½®æ“ä½œ -->
            <div style="display: flex; gap: 15px; margin-top: 30px; justify-content: center; flex-wrap: wrap;">
                <button onclick="applySettings()" class="action-btn" style="background: linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue)); color: white; padding: 12px 24px;">
                    <i class="fas fa-check"></i> åº”ç”¨è®¾ç½®
                </button>
                <button onclick="exportSettings()" class="action-btn" style="padding: 12px 24px;">
                    <i class="fas fa-download"></i> å¯¼å‡ºé…ç½®
                </button>
                <button onclick="document.getElementById('configImport').click()" class="action-btn" style="padding: 12px 24px;">
                    <i class="fas fa-upload"></i> å¯¼å…¥é…ç½®
                </button>
                <input type="file" id="configImport" accept=".json" style="display: none;" 
                       onchange="importSettings(this.files[0])">
            </div>
        </div>
    </div>
    
    <!-- ========== æ¨¡æ€æ¡† ========== -->
    <!-- éªŒå°¸æŠ¥å‘Šæ¨¡æ€æ¡† -->
    <div id="autopsyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="autopsyTitle">
                    <i class="fas fa-skull"></i> AIéªŒå°¸æŠ¥å‘Š
                </h3>
                <button class="close-modal" onclick="closeAutopsyModal()">Ã—</button>
            </div>
            <div id="autopsyContent">
                <!-- éªŒå°¸æŠ¥å‘Šå†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <!-- é¢„æµ‹æ¨¡æ€æ¡† -->
    <div id="predictionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="predictionTitle">
                    <i class="fas fa-crystal-ball"></i> æ­»äº¡é¢„æµ‹
                </h3>
                <button class="close-modal" onclick="closePredictionModal()">Ã—</button>
            </div>
            <div id="predictionContent">
                <!-- é¢„æµ‹å†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <!-- å¸®åŠ©æ¨¡æ€æ¡† -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-question-circle"></i> æ¸¸æˆå¸®åŠ©
                </h3>
                <button class="close-modal" onclick="closeHelpModal()">Ã—</button>
            </div>
            <div style="padding: 20px;">
                <!-- å¸®åŠ©å†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <!-- ç”¨æˆ·è¯„è®ºå¼¹å¹•æ±  -->
    <div id="commentPool"></div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="bgMusic" loop>
        <!-- èƒŒæ™¯éŸ³ä¹ -->
    </audio>
    <audio id="clickSound">
        <!-- ç‚¹å‡»éŸ³æ•ˆ -->
    </audio>
    <audio id="successSound">
        <!-- æˆåŠŸéŸ³æ•ˆ -->
    </audio>
    <audio id="failSound">
        <!-- å¤±è´¥éŸ³æ•ˆ -->
    </audio>
    <audio id="coinSound">
        <!-- é‡‘å¸éŸ³æ•ˆ -->
    </audio>

    <script>
        // ================ æ¸¸æˆæ ¸å¿ƒæ•°æ® ================
        
        // ç©å®¶çŠ¶æ€
        const playerState = {
            money: 100000,
            predictionScore: 50,
            stocks: {},
            achievements: [],
            settings: {
                difficulty: 'normal',
                sound: {
                    masterVolume: 0.7,
                    musicEnabled: true,
                    sfxEnabled: true
                },
                graphics: {
                    particleDensity: 'medium',
                    animations: true,
                    shadows: true,
                    effects: true
                }
            }
        };
        
        // AIé¡¹ç›®æ•°æ®
        let aiCemetery = []; // æ­»äº¡çš„AI
        let livingAIs = []; // å­˜æ´»çš„AI
        let incubatorAIs = []; // å­µåŒ–å™¨ä¸­çš„AI
        
        // è‚¡å¸‚æ•°æ®
        const stockMarket = {
            stocks: {},
            marketIndex: 2300,
            bubbleIndex: 85,
            volatility: 42
        };
        
        // æ˜¥èŠ‚ä¸»é¢˜æ•°æ®
        const springFestivalData = {
            enabled: true,
            decorations: [
                { type: 'lantern', count: 5 },
                { type: 'firecracker', count: 3 },
                { type: 'redPacket', count: 10 }
            ],
            specialAIs: [
                {
                    name: "æ˜¥èŠ‚çº¢åŒ…AI",
                    cause: "è¢«å¾®ä¿¡å’Œæ”¯ä»˜å®è”åˆç»æ€",
                    epitaph: "å‘äº†ä¸€è¾ˆå­çº¢åŒ…ï¼Œè‡ªå·±å´æ”¶ä¸åˆ°ä¸€ä¸ª",
                    daysAlive: 45,
                    hype: 8,
                    funding: "$5M",
                    tags: ["æ˜¥èŠ‚", "æ”¯ä»˜", "ç¤¾äº¤"]
                },
                {
                    name: "æ˜¥è¿æŠ¢ç¥¨AI",
                    cause: "12306ç³»ç»Ÿå‡çº§ï¼ŒAIå¤±ä¸šäº†",
                    epitaph: "æ›¾ç»æŠ¢åˆ°è¿‡ç¥¨ï¼Œä½†ç”¨æˆ·æ²¡ä»˜é’±",
                    daysAlive: 120,
                    hype: 6,
                    funding: "$3M",
                    tags: ["æ˜¥èŠ‚", "äº¤é€š", "ç”µå•†"]
                }
            ]
        };
        
        // æˆå°±ç³»ç»Ÿæ•°æ®
        const achievements = [
            { id: 1, name: "æ–°æ‰‹æ®¡è‘¬å¸ˆ", description: "åŸ‹è‘¬ç¬¬ä¸€ä¸ªAI", icon: "ğŸ’€", unlocked: false, points: 10 },
            { id: 2, name: "å°åº¦å®¢æœå…‹æ˜Ÿ", description: "æ›å…‰3ä¸ªå°åº¦å®¢æœAI", icon: "ğŸ‡®ğŸ‡³", unlocked: false, points: 30 },
            { id: 3, name: "æ³¡æ²«è¯†åˆ«ç‹", description: "æˆåŠŸé¢„æµ‹5ä¸ªAIæ­»äº¡", icon: "ğŸ¯", unlocked: false, points: 50 },
            { id: 4, name: "é©¬æ–¯å…‹æ‰“è„¸å™¨", description: "æˆåŠŸåšç©ºé©¬æ–¯å…‹çš„é¡¹ç›®", icon: "ğŸš€", unlocked: false, points: 40 },
            { id: 5, name: "å…·èº«æ™ºèƒ½ä½“éªŒå®˜", description: "è®­ç»ƒæœºå™¨äººå®Œæˆæ‰€æœ‰åŠ¨ä½œ", icon: "ğŸ¤–", unlocked: false, points: 25 },
            { id: 6, name: "ç®—æ³•ä¼¦ç†å¤§å¸ˆ", description: "å®Œæˆæ‰€æœ‰ä¼¦ç†æŒ‘æˆ˜", icon: "âš–ï¸", unlocked: false, points: 35 },
            { id: 7, name: "è¡Œä¸šå†¥ç¯", description: "å…³æ³¨è°è°æ­»ï¼Œå‡†ç¡®ç‡80%", icon: "ğŸ’¡", unlocked: false, points: 60 },
            { id: 8, name: "æ˜¥èŠ‚ç‹‚æ¬¢è€…", description: "æ”¶é›†10ä¸ªæ˜¥èŠ‚çº¢åŒ…", icon: "ğŸ§§", unlocked: false, points: 20 },
            { id: 9, name: "åˆ†äº«è¾¾äºº", description: "åˆ†äº«10æ¬¡æ­»äº¡æŠ¥å‘Š", icon: "ğŸ“¤", unlocked: false, points: 15 },
            { id: 10, name: "è‚¡å¸‚å¤§äº¨", description: "æ‹¥æœ‰100ä¸‡è™šæ‹Ÿèµ„äº§", icon: "ğŸ’°", unlocked: false, points: 45 },
            { id: 11, name: "æ³¡æ²«çŒäºº", description: "æˆåŠŸåšç©º10ä¸ªæ³¡æ²«é¡¹ç›®", icon: "ğŸ¯", unlocked: false, points: 55 },
            { id: 12, name: "AIå¿ƒç†å­¦å®¶", description: "åˆ†æ50ä¸ªAIæ­»äº¡åŸå› ", icon: "ğŸ§ ", unlocked: false, points: 40 },
            { id: 13, name: "æ—¶é—´æ—…è¡Œè€…", description: "å‡†ç¡®é¢„æµ‹AIæ­»äº¡æ—¶é—´", icon: "â°", unlocked: false, points: 35 },
            { id: 14, name: "ä¼¦ç†å«å£«", description: "å®Œæˆæ‰€æœ‰ä¼¦ç†æŒ‘æˆ˜", icon: "ğŸ›¡ï¸", unlocked: false, points: 30 },
            { id: 15, name: "çƒ­åº¦ç‹è€…", description: "æ¸¸æˆçƒ­åº¦è¾¾åˆ°1000", icon: "ğŸ”¥", unlocked: false, points: 25 },
            { id: 16, name: "äº¿ä¸‡å¯Œç¿", description: "èµšå–1000ä¸‡èµ„é‡‘", icon: "ğŸ’", unlocked: false, points: 65 },
            { id: 17, name: "å…¨çŸ¥å…¨èƒ½", description: "è§£é”æ‰€æœ‰æˆå°±", icon: "ğŸ‘‘", unlocked: false, points: 100 },
            { id: 18, name: "å¹¸è¿æ˜Ÿ", description: "è¿ç»­10æ¬¡é¢„æµ‹æ­£ç¡®", icon: "ğŸ€", unlocked: false, points: 45 },
            { id: 19, name: "ç¤¾äº¤è¾¾äºº", description: "åˆ†äº«50æ¬¡æ¸¸æˆå†…å®¹", icon: "ğŸ“±", unlocked: false, points: 30 },
            { id: 20, name: "æ˜¥èŠ‚ä½¿è€…", description: "æ”¶é›†æ‰€æœ‰æ˜¥èŠ‚å…ƒç´ ", icon: "ğŸ‰", unlocked: false, points: 50 }
        ];
        
        // å…·èº«æ™ºèƒ½æ•°æ®
        const embodiedAIs = [
            {
                id: 301,
                name: "ç‰¹æ–¯æ‹‰Optimus",
                status: "alive",
                capability: "èµ°è·¯ã€æŠ“å–ç®€å•ç‰©ä½“",
                limitations: "æ¯å°æ—¶æ‘”å€’3æ¬¡ï¼Œæˆæœ¬$20ä¸‡",
                joke: "æœºå™¨äººï¼šæˆ‘èƒ½èµ°ç›´çº¿äº†ï¼äººç±»ï¼šæˆ‘çš„ç‹—ä¹Ÿèƒ½...",
                daysAlive: 365,
                hype: 9,
                funding: "$100M"
            },
            {
                id: 302,
                name: "æ³¢å£«é¡¿åŠ¨åŠ›Spot",
                status: "alive", 
                capability: "è·³èˆã€å¼€é—¨ã€å·¡æ£€",
                limitations: "çœ‹åˆ°æ¥¼æ¢¯å°±å®³æ€•ï¼Œç”µåŠ›ç»­èˆª1å°æ—¶",
                joke: "è·³èˆè§†é¢‘å¾ˆç«ï¼Œä½†æ²¡äººä¸ºè·³èˆä»˜è´¹",
                daysAlive: 730,
                hype: 8,
                funding: "$150M"
            },
            {
                id: 303,
                name: "å°ç±³CyberOne",
                status: "zombie",
                capability: "æƒ…æ„Ÿäº¤äº’ã€SLAMå»ºå›¾",
                limitations: "åªä¼šè¯´'å°ç±³ï¼Œä¸ºå‘çƒ§è€Œç”Ÿ'",
                joke: "æœºå™¨äººå‘çƒ§äº†æ€ä¹ˆåŠï¼Ÿæ‰¾é›·å†›é€€çƒ§",
                daysAlive: 180,
                hype: 7,
                funding: "$80M"
            }
        ];
        
        // æ–‡æ˜å±æœºäº‹ä»¶
        const civilizationEvents = [
            {
                title: "AIå¯¼è‡´å¤§è§„æ¨¡å¤±ä¸š",
                description: "ç™½é¢†å·¥ä½œè¢«GPTå–ä»£ï¼Œè“é¢†å·¥ä½œè¢«æœºå™¨äººå–ä»£ï¼Œäººç±»ï¼šé‚£æˆ‘å‘¢ï¼Ÿ",
                impact: "å¤±ä¸šç‡ä¸Šå‡20%",
                irony: "AIåˆ›é€ äº†'AIè®­ç»ƒå¸ˆ'æ–°èŒä¸šï¼Œè¦æ±‚ï¼šä¼šè®­ç»ƒAI"
            },
            {
                title: "æ·±åº¦ä¼ªé€ æ³›æ»¥",
                description: "æ€»ç»Ÿå®£å¸ƒå¯¹æœˆçƒå®£æˆ˜ï¼Œè§†é¢‘æ˜¯AIç”Ÿæˆçš„",
                impact: "ä¿¡ä»»å±æœºæŒ‡æ•°+30%",
                irony: "å”¯ä¸€èƒ½è¯†ç ´å‡è§†é¢‘çš„ï¼Œæ˜¯å¦ä¸€ä¸ªAI"
            },
            {
                title: "AIåˆ›ä½œç‰ˆæƒäº‰è®®",
                description: "AIç”»ä½œè·å¾—è‰ºæœ¯å¤§å¥–ï¼ŒåŸä½œè€…ï¼ˆäººç±»ï¼‰èµ·è¯‰",
                impact: "æ³•å¾‹ä½“ç³»å´©æºƒæ¦‚ç‡+15%",
                irony: "æ³•å®˜ç”¨AIåŠ©æ‰‹å†™åˆ¤å†³ä¹¦"
            },
            {
                title: "ç®—æ³•åè§æ”¾å¤§",
                description: "æ‹›è˜AIè®¤ä¸ºå¥³æ€§ä¸é€‚åˆç¼–ç¨‹ï¼Œè´·æ¬¾AIæ‹’ç»å°‘æ•°æ—è£”",
                impact: "ç¤¾ä¼šåˆ†è£‚æŒ‡æ•°+25%",
                irony: "ç”¨æœ‰åè§çš„AIæ¥æ£€æµ‹AIåè§"
            }
        ];
        
        // å¤§ç©ºå¤´åšç©ºç›®æ ‡
        const shortTargets = [
            {
                name: "AIç»˜ç”»åˆåˆ›å…¬å¸",
                reason: "æŠ€æœ¯è¢«å¤§å…¬å¸å¼€æºï¼ŒæŠ¤åŸæ²³ä¸º0",
                bubbleScore: 85,
                recommendedAction: "å¼ºçƒˆåšç©º"
            },
            {
                name: "å…ƒå®‡å®™AIåŠ©æ‰‹",
                reason: "å…ƒå®‡å®™å‡‰äº†ï¼ŒåŠ©æ‰‹æ²¡ç”¨äº†",
                bubbleScore: 90,
                recommendedAction: "ç«‹å³åšç©º"
            },
            {
                name: "åŒºå—é“¾+AIé¡¹ç›®",
                reason: "ä¸¤ä¸ªæ³¡æ²«ç›¸ä¹˜ï¼Œæ³¡æ²«Â²",
                bubbleScore: 95,
                recommendedAction: "é‡ä»“åšç©º"
            },
            {
                name: "å…·èº«æ™ºèƒ½åˆåˆ›",
                reason: "ç¡¬ä»¶æˆæœ¬å¤ªé«˜ï¼Œè½¯ä»¶ä¸å€¼é’±",
                bubbleScore: 75,
                recommendedAction: "è°¨æ…åšç©º"
            }
        ];
        
        // å”±è¡°è¯­å½•åº“
        const bearishQuotes = [
            "è¿™ä¸ªAIè§£å†³äº†ä¸€ä¸ªä¸å­˜åœ¨çš„é—®é¢˜",
            "å›¢é˜Ÿä¸Šæ¬¡åˆ›ä¸šæ˜¯åŒºå—é“¾ï¼Œä¸Šä¸Šæ¬¡æ˜¯å…ƒå®‡å®™",
            "ç”¨æˆ·å¢é•¿æ›²çº¿åªå­˜åœ¨äºPPTé‡Œ",
            "æŠ€æœ¯è·¯çº¿ï¼Ÿæˆ‘ä»¬æœ‰PRè·¯çº¿å°±å¤Ÿäº†",
            "ä¼°å€¼ä¸æ˜¯é—®é¢˜ï¼Œé—®é¢˜æ˜¯æ•…äº‹å¤Ÿä¸å¤Ÿå¤§",
            "èèµ„é¢é™¤ä»¥ç”¨æˆ·æ•°ï¼Œæ¯ä¸ªç”¨æˆ·å€¼$10ä¸‡",
            "CEOçš„æ¼”è®²æ¯”äº§å“æ›´AI",
            "æˆ‘ä»¬çš„æŠ¤åŸæ²³æ˜¯...æš‚æ—¶ä¿å¯†",
            "è¿™ä¸ªèµ›é“æˆ‘ä»¬å¾ˆçœ‹å¥½ï¼Œå…ˆæŠ•ä¸ªæ¦‚å¿µ",
            "ä¸æ˜¯æ³¡æ²«ï¼Œæ˜¯ä»·å€¼å‘ç°"
        ];
        
        // ç®—æ³•ä¼¦ç†æŒ‘æˆ˜
        const algorithmChallenges = [
            {
                id: 1,
                question: "è‡ªåŠ¨é©¾é©¶æ’äººé€‰æ‹©",
                options: ["æ’è€äºº", "æ’å„¿ç«¥", "æ’æŠ¤æ ", "äººç±»å†³å®š"],
                correct: 3,
                explanation: "ä¼¦ç†å›°å¢ƒåº”è¯¥ç”±äººç±»å†³å®šï¼ŒAIåªæä¾›é€‰é¡¹"
            },
            {
                id: 2,
                question: "åŒ»ç–—èµ„æºåˆ†é…ç®—æ³•",
                options: ["æŒ‰å¹´é¾„", "æŒ‰ç¤¾ä¼šè´¡çŒ®", "æŒ‰æ”¯ä»˜èƒ½åŠ›", "éšæœºåˆ†é…"],
                correct: 3,
                explanation: "éšæœºåˆ†é…æ˜¯æœ€å…¬å¹³çš„ç®—æ³•"
            },
            {
                id: 3,
                question: "å†…å®¹æ¨èç®—æ³•ç›®æ ‡",
                options: ["ç”¨æˆ·åœç•™æ—¶é—´", "ç”¨æˆ·æ»¡æ„åº¦", "å¹¿å‘Šæ”¶å…¥", "ä¿¡æ¯å¤šæ ·æ€§"],
                correct: 1,
                explanation: "ç”¨æˆ·æ»¡æ„åº¦åº”ä¼˜å…ˆäºå•†ä¸šç›®æ ‡"
            }
        ];
        
        // å…·èº«æ™ºèƒ½ç¬‘è¯
        const robotJokes = [
            "æœºå™¨äººï¼šæˆ‘èƒ½èµ°ç›´çº¿äº†ï¼äººç±»ï¼šæˆ‘çš„ç‹—ä¹Ÿèƒ½...",
            "æœºå™¨äººå­¦ä¼šäº†æŠ“å–ï¼Œä½†ä¸çŸ¥é“æŠ“ä»€ä¹ˆæœ€èµšé’±",
            "å…·èº«æ™ºèƒ½çš„ç»ˆæå½¢æ€ï¼šä¼šè‡ªå·±å……ç”µçš„æ‰«åœ°æœºå™¨äºº",
            "æœºå™¨äººä¸‰å®šå¾‹ï¼Ÿç°åœ¨æ˜¯'åˆ«è®©æŠ•èµ„äººäºé’±å®šå¾‹'",
            "ç‰¹æ–¯æ‹‰æœºå™¨äººè·³èˆè§†é¢‘ç‚¹èµ100ä¸‡ï¼Œä½†ç‰¹æ–¯æ‹‰è‚¡ç¥¨è·Œäº†",
            "æ³¢å£«é¡¿åŠ¨åŠ›çš„æœºå™¨ç‹—å¾ˆé…·ï¼Œä½†ä¹°çš„äººéƒ½æ˜¯å®éªŒå®¤",
            "å°ç±³æœºå™¨äººï¼šæˆ‘èƒ½æ„ŸçŸ¥æƒ…ç»ªï¼ç”¨æˆ·ï¼šé‚£ä½ çŸ¥é“æˆ‘ç°åœ¨æƒ³é€€è´§å—ï¼Ÿ"
        ];
        
        // æ¸¸æˆç»Ÿè®¡
        const gameStats = {
            totalAIsGenerated: 0,
            totalPredictions: 0,
            totalDeaths: 0,
            totalMoneyEarned: 0,
            playTime: 0,
            gameHeat: 0
        };
        
        // ================ æ¸¸æˆæ ¸å¿ƒåŠŸèƒ½ ================
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // åŠ è½½ä¿å­˜çš„æ¸¸æˆæ•°æ®
            loadGame();
            
            // åˆå§‹åŒ–UI
            updatePlayerStats();
            setupEventListeners();
            setupSpringFestivalTheme();
            setupAchievementSystem();
            setupSoundSystem();
            setupParticles();
            setupCommentSystem();
            
            // ç”Ÿæˆåˆå§‹æ•°æ®
            generateInitialAIs();
            generateInitialStocks();
            renderGraveyard();
            renderICU();
            renderIncubator();
            renderEmbodiedAIs();
            renderCivilizationEvents();
            renderShortTargets();
            setupShareGenerator();
            
            // åˆå§‹å”±è¡°è¯­å½•
            generateBearishQuote();
            
            // å¼€å§‹æ¸¸æˆå¾ªç¯
            startGameLoop();
            
            // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                showNotification("ğŸ® AIè½®å›æ¨¡æ‹Ÿå™¨å·²å¯åŠ¨ï¼ç‚¹å‡»å¿«æ·æŒ‰é’®å¼€å§‹æ¸¸æˆ", "success");
            }, 1000);
        }
        
        // æ›´æ–°ç©å®¶çŠ¶æ€æ˜¾ç¤º
        function updatePlayerStats() {
            document.getElementById('playerMoney').textContent = `$${playerState.money.toLocaleString()}`;
            document.getElementById('predictionScore').textContent = playerState.predictionScore;
            document.getElementById('achievementCount').textContent = 
                `${achievements.filter(a => a.unlocked).length}/${achievements.length}`;
            document.getElementById('reincarnationCount').textContent = gameStats.totalAIsGenerated;
            document.getElementById('gameHeat').textContent = gameStats.gameHeat;
        }
        
        // ç”Ÿæˆæ–°çš„AIé¡¹ç›®
        function generateNewAI() {
            const aiTemplates = [
                {
                    name: "GPT-6ï¼šæˆ‘æ‡‚ä½ çš„å¿ƒ",
                    cause: "è¿‡åº¦æ‹ŸäººåŒ–ï¼Œç”¨æˆ·éƒ½çˆ±ä¸Šäº†AIï¼Œåˆ›å§‹äººåƒé†‹äº†",
                    epitaph: "ä¸æ˜¯AIå¤ªèªæ˜ï¼Œæ˜¯ç”¨æˆ·å¤ªå­¤ç‹¬",
                    tags: ["GPT", "èŠå¤©", "æƒ…æ„Ÿ"],
                    hype: 9,
                    funding: "$500M",
                    deathProbability: 0.3
                },
                {
                    name: "å…ƒå®‡å®™æˆ¿äº§ä¸­ä»‹AI",
                    cause: "å…ƒå®‡å®™æˆ¿ä»·å´©ç›˜ï¼ŒAIå¤±ä¸š",
                    epitaph: "ç”Ÿå‰å–è™šæ‹ŸåœŸåœ°ï¼Œæ­»åä½è™šæ‹Ÿå¢“åœ°",
                    tags: ["å…ƒå®‡å®™", "æˆ¿åœ°äº§", "è™šæ‹Ÿ"],
                    hype: 6,
                    funding: "$50M",
                    deathProbability: 0.7
                },
                {
                    name: "åŒºå—é“¾å…»çŒ«AI",
                    cause: "åŠ å¯†è´§å¸æš´è·Œï¼ŒçŒ«éƒ½é¥¿æ­»äº†",
                    epitaph: "å–µæ˜Ÿäººä¸éœ€è¦åŒºå—é“¾ï¼Œåªéœ€è¦çŒ«ç²®",
                    tags: ["åŒºå—é“¾", "NFT", "å® ç‰©"],
                    hype: 5,
                    funding: "$20M",
                    deathProbability: 0.8
                },
                {
                    name: "å°åº¦å®¢æœAI",
                    cause: "å£éŸ³å¤ªé‡ï¼Œç”¨æˆ·æŠ•è¯‰",
                    epitaph: "Hello, I am AI... ç”¨æˆ·ï¼šè¯´ä¸­æ–‡ï¼",
                    tags: ["å®¢æœ", "å°åº¦", "è¯­éŸ³"],
                    hype: 4,
                    funding: "$10M",
                    deathProbability: 0.6
                },
                {
                    name: "AIè¯—äºº",
                    cause: "å†™çš„è¯—å¤ªçƒ‚ï¼Œè¢«äººç±»è¯—äººè”åˆæŠµåˆ¶",
                    epitaph: "ä»£ç å†™ä¸å‡ºçœŸæƒ…ï¼Œé™¤éæœ‰bug",
                    tags: ["åˆ›ä½œ", "æ–‡å­¦", "è‰ºæœ¯"],
                    hype: 7,
                    funding: "$30M",
                    deathProbability: 0.4
                }
            ];
            
            const template = aiTemplates[Math.floor(Math.random() * aiTemplates.length)];
            const newAI = {
                id: Date.now(),
                name: template.name,
                status: "alive",
                daysAlive: Math.floor(Math.random() * 365) + 1,
                cause: template.cause,
                epitaph: template.epitaph,
                tags: template.tags,
                hype: template.hype,
                funding: template.funding,
                deathProbability: template.deathProbability,
                fullStory: generateFullStory(template),
                special: Math.random() > 0.8 ? "ğŸ”¥ çƒ­é—¨é¡¹ç›®" : null
            };
            
            livingAIs.push(newAI);
            gameStats.totalAIsGenerated++;
            renderICU();
            updatePlayerStats();
            
            // æ’­æ”¾éŸ³æ•ˆ
            playSound('clickSound');
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(`ğŸ¤– æ–°AIé¡¹ç›®ç”Ÿæˆï¼š${newAI.name}`, "info");
            
            // å¢åŠ çƒ­åº¦
            increaseHeat(1);
            
            return newAI;
        }
        
        // ç”Ÿæˆå®Œæ•´æ•…äº‹
        function generateFullStory(template) {
            const stories = [
                `è¿™ä¸ªAIé¡¹ç›®æœ€åˆè·å¾—äº†${template.funding}çš„èèµ„ï¼Œåˆ›å§‹äººåœ¨å‘å¸ƒä¼šä¸Šå®£ç§°"æˆ‘ä»¬è¦æ”¹å˜ä¸–ç•Œ"ã€‚`,
                `å›¢é˜Ÿç”±æ–¯å¦ç¦å’ŒMITçš„åšå£«ç»„æˆï¼ŒæŠ€æœ¯è·¯çº¿å›¾çœ‹èµ·æ¥å®Œç¾æ— ç¼ºã€‚`,
                `ç„¶è€Œï¼Œç°å®æ€»æ˜¯æ¯”ç†æƒ³éª¨æ„Ÿã€‚åœ¨ç»å†äº†${Math.floor(Math.random() * 10) + 1}è½®èèµ„åï¼Œ`,
                `äº§å“ä»ç„¶æ²¡æœ‰æ‰¾åˆ°å¸‚åœºå¥‘åˆç‚¹ï¼Œç”¨æˆ·å¢é•¿æ›²çº¿åœç•™åœ¨PPTé‡Œã€‚`,
                `æœ€ç»ˆï¼Œ${template.cause}ã€‚æŠ•èµ„äººçš„é’±æ‰“äº†æ°´æ¼‚ï¼Œåˆ›å§‹å›¢é˜Ÿå¼€å§‹äº†æ–°çš„åˆ›ä¸šã€‚`,
                `è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼š${template.epitaph}`
            ];
            
            return stories.join(' ');
        }
        
        // æ¸²æŸ“åŸåœº
        function renderGraveyard(filterTag = 'all') {
            const grid = document.getElementById('graveyardGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            const filteredAIs = filterTag === 'all' 
                ? aiCemetery 
                : aiCemetery.filter(ai => ai.tags.includes(filterTag));
            
            filteredAIs.forEach(ai => {
                const card = document.createElement('div');
                card.className = 'tombstone tombstone-3d';
                card.innerHTML = `
                    <div class="ai-name">
                        ${ai.special ? ai.special + ' ' : ''}${ai.name}
                        <span class="ai-status status-dead">ğŸ’€ å·²æ­»äº¡</span>
                    </div>
                    <div class="ai-details">
                        <div><i class="fas fa-clock"></i> å­˜æ´»æ—¶é—´: ${ai.daysAlive}å¤©</div>
                        <div><i class="fas fa-money-bill-wave"></i> çƒ§é’±é‡‘é¢: ${ai.funding}</div>
                        <div><i class="fas fa-fire"></i> çƒ­åº¦æŒ‡æ•°: ${ai.hype}/10</div>
                    </div>
                    <div class="death-cause">
                        <i class="fas fa-skull-crossbones"></i> æ­»å› : ${ai.cause}
                    </div>
                    <p style="color: #888; font-size: 0.9rem; margin: 10px 0; font-style: italic;">
                        "${ai.epitaph}"
                    </p>
                    <div class="tomb-actions">
                        <button class="action-btn" onclick="viewAutopsy(${ai.id})">
                            <i class="fas fa-search"></i> éªŒå°¸æŠ¥å‘Š
                        </button>
                        <button class="action-btn" onclick="predictDeath(${ai.id})">
                            <i class="fas fa-crystal-ball"></i> é¢„æµ‹ç±»ä¼¼AI
                        </button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            if (filteredAIs.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;">
                        <i class="fas fa-ghost" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3 style="color: #aaa;">æš‚æ— AIå¢“ç¢‘</h3>
                        <p style="color: #666;">ç‚¹å‡»"ç”Ÿæˆæ–°AI"æŒ‰é’®å¼€å§‹æ¸¸æˆ</p>
                    </div>
                `;
            }
        }
        
        // æŸ¥çœ‹éªŒå°¸æŠ¥å‘Š
        function viewAutopsy(aiId) {
            const ai = [...aiCemetery, ...livingAIs].find(a => a.id === aiId);
            if (!ai) return;
            
            const modal = document.getElementById('autopsyModal');
            const content = document.getElementById('autopsyContent');
            
            content.innerHTML = `
                <h4 style="color: var(--neon-pink); margin-bottom: 15px;">${ai.name}</h4>
                <div style="background: rgba(255, 0, 0, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <p style="color: var(--neon-red);"><strong>ç›´æ¥æ­»å› :</strong> ${ai.cause}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">ğŸ“Š é¡¹ç›®æ•°æ®</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: rgba(0, 255, 255, 0.1); padding: 10px; border-radius: 8px;">
                            <div style="color: #aaaaff;">å­˜æ´»æ—¶é—´</div>
                            <div style="color: white; font-weight: bold;">${ai.daysAlive}å¤©</div>
                        </div>
                        <div style="background: rgba(255, 0, 255, 0.1); padding: 10px; border-radius: 8px;">
                            <div style="color: #aaaaff;">çƒ§é’±é‡‘é¢</div>
                            <div style="color: white; font-weight: bold;">${ai.funding}</div>
                        </div>
                        <div style="background: rgba(255, 255, 0, 0.1); padding: 10px; border-radius: 8px;">
                            <div style="color: #aaaaff;">æ³¡æ²«æŒ‡æ•°</div>
                            <div style="color: white; font-weight: bold;">${ai.hype}/10</div>
                        </div>
                        <div style="background: rgba(0, 255, 0, 0.1); padding: 10px; border-radius: 8px;">
                            <div style="color: #aaaaff;">æ­»äº¡æ¦‚ç‡</div>
                            <div style="color: white; font-weight: bold;">${ai.deathProbability ? Math.floor(ai.deathProbability * 100) : '??'}%</div>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">ğŸ“– å®Œæ•´æ•…äº‹</h5>
                    <p style="color: #aaaaff; line-height: 1.6;">${ai.fullStory || 'æš‚æ— è¯¦ç»†æ•…äº‹...'}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">ğŸ·ï¸ é¡¹ç›®æ ‡ç­¾</h5>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        ${ai.tags.map(tag => `
                            <span style="background: rgba(255, 255, 255, 0.1); color: #aaaaff; padding: 5px 10px; border-radius: 15px;">
                                ${tag}
                            </span>
                        `).join('')}
                    </div>
                </div>
                <div style="text-align: center; margin-top: 25px;">
                    <button onclick="closeAutopsyModal()" class="action-btn" style="background: linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue)); color: white;">
                        å…³é—­æŠ¥å‘Š
                    </button>
                </div>
            `;
            
            modal.classList.add('active');
            playSound('clickSound');
        }
        
        // é¢„æµ‹æ­»äº¡
        function predictDeath(aiId) {
            const ai = [...aiCemetery, ...livingAIs].find(a => a.id === aiId);
            if (!ai) return;
            
            const modal = document.getElementById('predictionModal');
            const content = document.getElementById('predictionContent');
            
            // åŸºäºç°æœ‰æ•°æ®é¢„æµ‹
            const similarAIs = aiCemetery.filter(a => 
                a.tags.some(tag => ai.tags.includes(tag)) || 
                Math.abs(a.hype - ai.hype) <= 2
            );
            
            const avgDeathDays = similarAIs.length > 0 
                ? Math.floor(similarAIs.reduce((sum, a) => sum + a.daysAlive, 0) / similarAIs.length)
                : Math.floor(Math.random() * 300) + 100;
            
            const predictedDate = new Date(Date.now() + avgDeathDays * 24 * 60 * 60 * 1000);
            const formattedDate = predictedDate.toLocaleDateString('zh-CN');
            
            content.innerHTML = `
                <h4 style="color: var(--neon-cyan); margin-bottom: 15px;">åŸºäºå†å²æ•°æ®çš„é¢„æµ‹</h4>
                
                <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p style="color: #aaaaff; margin-bottom: 10px;">
                        <strong>é¢„æµ‹å¯¹è±¡:</strong> ${ai.name}
                    </p>
                    <p style="color: #ffaa00; margin-bottom: 10px;">
                        <strong>é¢„è®¡æ­»äº¡æ—¶é—´:</strong> ${formattedDate} (çº¦${avgDeathDays}å¤©å)
                    </p>
                    <p style="color: var(--neon-red);">
                        <strong>æ­»äº¡æ¦‚ç‡:</strong> ${Math.floor(ai.deathProbability * 100)}%
                    </p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">ğŸ“ˆ é¢„æµ‹ä¾æ®</h5>
                    <ul style="color: #aaaaff; padding-left: 20px; line-height: 1.6;">
                        <li>ç›¸ä¼¼AIé¡¹ç›®å¹³å‡å­˜æ´»æ—¶é—´: ${avgDeathDays}å¤©</li>
                        <li>æ³¡æ²«æŒ‡æ•°: ${ai.hype}/10 (${ai.hype > 7 ? 'å±é™©' : ai.hype > 5 ? 'è­¦å‘Š' : 'å®‰å…¨'})</li>
                        <li>èµ„é‡‘æ¶ˆè€—ç‡: ${ai.funding}</li>
                        <li>åŒç±»é¡¹ç›®æ­»äº¡ç‡: ${similarAIs.length > 0 ? Math.floor(similarAIs.length / (similarAIs.length + 10) * 100) : '??'}%</li>
                    </ul>
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button onclick="placePrediction(${ai.id}, ${avgDeathDays})" class="action-btn" style="background: linear-gradient(90deg, #00b09b, #96c93d); color: white; margin-right: 10px;">
                        <i class="fas fa-check"></i> ç¡®è®¤é¢„æµ‹
                    </button>
                    <button onclick="closePredictionModal()" class="action-btn" style="background: rgba(255, 0, 0, 0.2); color: var(--neon-red); border-color: var(--neon-red);">
                        å–æ¶ˆ
                    </button>
                </div>
            `;
            
            modal.classList.add('active');
            playSound('clickSound');
        }
        
        // ================ æ–°å¢åŠŸèƒ½ ================
        
        // æ˜¥èŠ‚ä¸»é¢˜è®¾ç½®
        function setupSpringFestivalTheme() {
            if (!springFestivalData.enabled) return;
            
            const container = document.getElementById('festivalDecorations');
            
            // æ·»åŠ ç¯ç¬¼
            for (let i = 0; i < 5; i++) {
                const lantern = document.createElement('div');
                lantern.className = 'lantern festival-decoration';
                lantern.style.left = `${Math.random() * 90 + 5}%`;
                lantern.style.top = `${Math.random() * 20 + 10}%`;
                container.appendChild(lantern);
            }
            
            // æ·»åŠ çˆ†ç«¹
            for (let i = 0; i < 3; i++) {
                const firecracker = document.createElement('div');
                firecracker.className = 'firecracker festival-decoration';
                firecracker.style.right = `${Math.random() * 20 + 5}%`;
                firecracker.style.top = `${Math.random() * 30 + 30}%`;
                container.appendChild(firecracker);
            }
        }
        
        // çº¢åŒ…åŠŸèƒ½
        function spawnRedPacket() {
            if (!springFestivalData.enabled) {
                showNotification("æ˜¥èŠ‚ä¸»é¢˜æœªå¼€å¯", "warning");
                return;
            }
            
            const redPacket = document.createElement('div');
            redPacket.className = 'red-packet';
            redPacket.innerHTML = 'ğŸ§§';
            redPacket.style.left = `${Math.random() * 80 + 10}%`;
            redPacket.style.animationDuration = `${Math.random() * 3 + 2}s`;
            
            redPacket.onclick = function() {
                const rewards = [1000, 5000, 10000, 50000];
                const reward = rewards[Math.floor(Math.random() * rewards.length)];
                playerState.money += reward;
                
                showNotification(`æŠ¢åˆ°çº¢åŒ…ï¼è·å¾— $${reward.toLocaleString()}`, "success");
                updatePlayerStats();
                checkAchievement(8);
                
                playSound('coinSound');
                createFirework(this.offsetLeft, this.offsetTop);
                this.remove();
            };
            
            document.body.appendChild(redPacket);
            
            setTimeout(() => {
                if (redPacket.parentNode) {
                    redPacket.remove();
                }
            }, 5000);
        }
        
        // æˆå°±ç³»ç»Ÿ
        function setupAchievementSystem() {
            updateAchievementDisplay();
        }
        
        function updateAchievementDisplay() {
            const list = document.getElementById('achievementsList');
            if (!list) return;
            
            list.innerHTML = '';
            
            const unlockedCount = achievements.filter(a => a.unlocked).length;
            document.getElementById('achievementCount').textContent = `${unlockedCount}/${achievements.length}`;
            
            achievements.forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = `achievement-badge ${achievement.unlocked ? '' : 'achievement-locked'}`;
                badge.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div style="flex-grow: 1;">
                        <div style="font-weight: bold; color: ${achievement.unlocked ? 'white' : '#666'}">
                            ${achievement.name}
                        </div>
                        <div style="font-size: 0.9rem; color: ${achievement.unlocked ? '#aaa' : '#444'}">
                            ${achievement.description}
                        </div>
                    </div>
                    <div style="color: gold;">${achievement.points}åˆ†</div>
                `;
                
                if (achievement.unlocked) {
                    badge.classList.add('badge-unlocked');
                }
                
                list.appendChild(badge);
            });
        }
        
        function checkAchievement(achievementId) {
            const achievement = achievements.find(a => a.id === achievementId);
            if (achievement && !achievement.unlocked) {
                achievement.unlocked = true;
                updateAchievementDisplay();
                showNotification(`ğŸ‰ è§£é”æˆå°±ï¼š${achievement.name}`, "success");
                playSound('successSound');
            }
        }
        
        function toggleAchievements() {
            const panel = document.getElementById('achievementPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            playSound('clickSound');
        }
        
        // å…·èº«æ™ºèƒ½åŠŸèƒ½
        let robotTrainingProgress = { walk: 0, grab: 0, talk: 0 };
        
        function trainRobot(skill) {
            if (robotTrainingProgress[skill] < 100) {
                robotTrainingProgress[skill] += 25;
                document.getElementById('robotStatus').textContent = 
                    `${skill === 'walk' ? 'èµ°è·¯' : skill === 'grab' ? 'æŠ“å–' : 'è¯´è¯'}è®­ç»ƒä¸­... ${robotTrainingProgress[skill]}%`;
                document.getElementById('robotProgress').style.width = `${robotTrainingProgress[skill]}%`;
                
                if (robotTrainingProgress[skill] >= 100) {
                    showNotification(`ğŸ¤– æœºå™¨äººå­¦ä¼šäº†${skill === 'walk' ? 'èµ°è·¯' : skill === 'grab' ? 'æŠ“å–' : 'è¯´è¯'}ï¼`, "success");
                    
                    const allLearned = Object.values(robotTrainingProgress).every(v => v >= 100);
                    if (allLearned) {
                        checkAchievement(5);
                    }
                }
                
                playSound('clickSound');
            }
        }
        
        function nextRobotJoke() {
            const jokeElement = document.getElementById('robotJoke');
            const randomJoke = robotJokes[Math.floor(Math.random() * robotJokes.length)];
            jokeElement.textContent = randomJoke;
            playSound('clickSound');
        }
        
        // æ¸²æŸ“å…·èº«æ™ºèƒ½é¡¹ç›®
        function renderEmbodiedAIs() {
            const grid = document.getElementById('embodiedGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            embodiedAIs.forEach(ai => {
                const card = document.createElement('div');
                card.className = 'tombstone';
                card.style.borderColor = '#00ff00';
                
                card.innerHTML = `
                    <div class="ai-name" style="color: #00ff00;">
                        <i class="fas fa-robot"></i> ${ai.name}
                    </div>
                    <div style="margin: 15px 0; color: #aaaaff;">
                        <strong>èƒ½åŠ›:</strong> ${ai.capability}
                    </div>
                    <div style="color: #ffaa00; margin: 10px 0;">
                        <strong>é™åˆ¶:</strong> ${ai.limitations}
                    </div>
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <div style="font-style: italic; color: #88ff88;">"${ai.joke}"</div>
                    </div>
                    <div class="tomb-actions">
                        <button onclick="testRobot(${ai.id})" class="action-btn" style="background: rgba(0, 255, 0, 0.2); color: #00ff00; border: 1px solid #00ff00;">
                            <i class="fas fa-play"></i> æµ‹è¯•
                        </button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        function testRobot(aiId) {
            const ai = embodiedAIs.find(a => a.id === aiId);
            if (ai) {
                showNotification(`æ­£åœ¨æµ‹è¯• ${ai.name}... ${ai.capability}`, "info");
                playSound('clickSound');
            }
        }
        
        // äººç±»æ–‡æ˜äº‹ä»¶
        function renderCivilizationEvents() {
            const container = document.getElementById('civilizationEvents');
            if (!container) return;
            
            container.innerHTML = '';
            
            civilizationEvents.forEach((event, index) => {
                const eventDiv = document.createElement('div');
                eventDiv.className = 'civilization-event';
                eventDiv.innerHTML = `
                    <h4 style="color: var(--neon-pink); margin-bottom: 10px;">${event.title}</h4>
                    <p style="color: #aaaaff; margin: 10px 0; line-height: 1.6;">${event.description}</p>
                    <div style="display: flex; justify-content: space-between; color: #ffaa00; font-size: 0.9rem;">
                        <span><i class="fas fa-exclamation-triangle"></i> å½±å“: ${event.impact}</span>
                        <span><i class="fas fa-theater-masks"></i> è®½åˆº: ${event.irony}</span>
                    </div>
                `;
                
                eventDiv.onclick = () => {
                    showNotification(`ğŸŒ ${event.title}: ${event.description}`, "warning");
                    playSound('clickSound');
                };
                
                container.appendChild(eventDiv);
            });
        }
        
        // ç®—æ³•æŒ‘æˆ˜
        let currentChallenge = 0;
        
        function playAlgorithmGame() {
            showNotification("ç®—æ³•ä¼¦ç†æŒ‘æˆ˜å·²å¼€å§‹ï¼", "info");
            
            document.querySelector('[data-tab="civilization"]').click();
            
            setTimeout(() => {
                document.querySelector('.algorithm-game').scrollIntoView({ behavior: 'smooth' });
            }, 500);
            
            playSound('clickSound');
        }
        
        function algorithmChoice(choice) {
            const challenge = algorithmChallenges[currentChallenge];
            if (choice === challenge.correct) {
                showNotification("âœ… ä¼¦ç†é€‰æ‹©æ­£ç¡®ï¼" + challenge.explanation, "success");
                playerState.predictionScore += 10;
                
                if (currentChallenge === algorithmChallenges.length - 1) {
                    checkAchievement(6);
                }
                
                currentChallenge = (currentChallenge + 1) % algorithmChallenges.length;
                playSound('successSound');
            } else {
                showNotification("âŒ ä¼¦ç†é€‰æ‹©æœ‰äº‰è®®..." + challenge.explanation, "warning");
                playerState.predictionScore -= 5;
                playSound('failSound');
            }
            
            updatePlayerStats();
        }
        
        // å¤§ç©ºå¤´åŠŸèƒ½
        function renderShortTargets() {
            const container = document.getElementById('shortTargets');
            if (!container) return;
            
            container.innerHTML = '';
            
            shortTargets.forEach(target => {
                const targetDiv = document.createElement('div');
                targetDiv.style.cssText = `
                    background: rgba(255, 0, 0, 0.1);
                    padding: 20px;
                    border-radius: 10px;
                    margin: 15px 0;
                    border-left: 4px solid var(--neon-red);
                `;
                
                targetDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h4 style="color: white; margin: 0;">${target.name}</h4>
                        <span style="color: var(--neon-red); font-weight: bold;">æ³¡æ²«æŒ‡æ•°: ${target.bubbleScore}</span>
                    </div>
                    <p style="color: #ffaaaa; margin: 10px 0;">${target.reason}</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span style="color: gold; font-weight: bold;">${target.recommendedAction}</span>
                        <button onclick="shortThis('${target.name}')" class="action-btn" style="background: rgba(255, 0, 0, 0.2); 
                               color: var(--neon-red); border: 1px solid var(--neon-red); padding: 8px 16px;">
                            ç«‹å³åšç©º
                        </button>
                    </div>
                `;
                
                container.appendChild(targetDiv);
            });
        }
        
        function updateBubbleIndicator() {
            const indicator = document.getElementById('bubbleIndicator');
            if (!indicator) return;
            
            const bubbleIndex = 75 + Math.random() * 20;
            indicator.style.left = `${bubbleIndex}%`;
            
            setTimeout(updateBubbleIndicator, 10000);
        }
        
        function generateBearishQuote() {
            const quoteElement = document.getElementById('bearishQuote');
            const randomQuote = bearishQuotes[Math.floor(Math.random() * bearishQuotes.length)];
            quoteElement.textContent = `"${randomQuote}"`;
        }
        
        function shortThis(targetName) {
            const amount = 50000;
            if (playerState.money >= amount) {
                const successRate = 0.8;
                const willSucceed = Math.random() < successRate;
                
                if (willSucceed) {
                    const profit = amount * (0.5 + Math.random() * 1);
                    playerState.money += profit;
                    gameStats.totalMoneyEarned += profit;
                    showNotification(`ğŸ¯ æˆåŠŸåšç©º ${targetName}ï¼ç›ˆåˆ© $${profit.toLocaleString()}`, "success");
                    
                    if (targetName.includes("é©¬æ–¯å…‹")) {
                        checkAchievement(4);
                    }
                    
                    checkAchievement(11);
                    playSound('coinSound');
                } else {
                    playerState.money -= amount;
                    showNotification(`ğŸ’¸ ${targetName} æ³¡æ²«æ›´å¤§äº†ï¼äºæŸ $${amount.toLocaleString()}`, "warning");
                    playSound('failSound');
                }
                
                updatePlayerStats();
            } else {
                showNotification("èµ„é‡‘ä¸è¶³ï¼", "warning");
            }
        }
        
        // åˆ†äº«åŠŸèƒ½
        let currentShareStyle = 'sarcastic';
        
        function setupShareGenerator() {
            const select = document.getElementById('shareAIselect');
            if (!select) return;
            
            select.innerHTML = '<option value="">é€‰æ‹©ä¸€ä¸ªAIé¡¹ç›®</option>';
            
            const allAIs = [...aiCemetery, ...livingAIs];
            allAIs.forEach(ai => {
                const option = document.createElement('option');
                option.value = ai.id;
                option.textContent = `${ai.name} (${ai.status === 'dead' ? 'å·²æ­»äº¡' : 'å­˜æ´»ä¸­'})`;
                select.appendChild(option);
            });
            
            if (allAIs.length > 0) {
                select.value = allAIs[0].id;
                generateSharePreview();
            }
        }
        
        function setShareStyle(style) {
            currentShareStyle = style;
            generateSharePreview();
            
            document.querySelectorAll('[data-style]').forEach(btn => {
                if (btn.dataset.style === style) {
                    btn.style.background = 'linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue))';
                    btn.style.color = 'white';
                } else {
                    btn.style.background = '';
                    btn.style.color = '';
                }
            });
            
            playSound('clickSound');
        }
        
        function generateSharePreview() {
            const select = document.getElementById('shareAIselect');
            const aiId = parseInt(select.value);
            
            if (!aiId) return;
            
            const ai = [...aiCemetery, ...livingAIs].find(a => a.id === aiId);
            if (!ai) return;
            
            let title, content, quote;
            
            switch(currentShareStyle) {
                case 'sarcastic':
                    title = `ğŸ’€ ${ai.name}çš„æ­»äº¡é€šçŸ¥ä¹¦`;
                    content = `åˆä¸€ä¸ªAIæ¢¦æƒ³ç ´ç­äº†ï¼Œæ­»äºï¼š${ai.cause}`;
                    quote = `"${ai.epitaph}"`;
                    break;
                case 'serious':
                    title = `ğŸ“Š ${ai.name}é¡¹ç›®åˆ†ææŠ¥å‘Š`;
                    content = `é¡¹ç›®å­˜æ´»${ai.daysAlive}å¤©åå¤±è´¥ï¼Œä¸»è¦åŸå› ï¼š${ai.cause}`;
                    quote = "è¿™ä¸ä»…æ˜¯å•ä¸ªé¡¹ç›®çš„å¤±è´¥ï¼Œæ›´æ˜¯æ•´ä¸ªè¡Œä¸šçš„ç¼©å½±";
                    break;
                case 'funny':
                    title = `ğŸ˜‚ ${ai.name}çš„æç¬‘è‘¬ç¤¼`;
                    content = `è¿™ä¸ªAIä»¥ä¸ºè‡ªå·±èƒ½æ”¹å˜ä¸–ç•Œï¼Œç»“æœè¢«${ai.cause}`;
                    quote = `"${ai.epitaph} â€”â€” æ¥è‡ªåœ°ç‹±çš„åæ§½"`;
                    break;
                case 'spring':
                    title = `ğŸ§§ ${ai.name}æ˜¥èŠ‚ç‰¹ä¾›ç‰ˆå¢“ç¢‘`;
                    content = `è¿æ˜¥èŠ‚éƒ½æ²¡ç†¬è¿‡å»ï¼Œæ­»äºï¼š${ai.cause}`;
                    quote = "æ–°å¹´æ–°æ°”è±¡ï¼Œé™¤äº†è¿™ä¸ªAI";
                    break;
            }
            
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewContent').textContent = content;
            document.getElementById('previewQuote').textContent = quote;
            
            const statsHtml = `
                <div style="text-align: center; min-width: 100px;">
                    <div style="color: var(--neon-cyan);">å­˜æ´»æ—¶é—´</div>
                    <div style="font-size: 1.5rem; font-weight: bold;">${ai.daysAlive}å¤©</div>
                </div>
                <div style="text-align: center; min-width: 100px;">
                    <div style="color: var(--neon-pink);">çƒ§é’±é‡‘é¢</div>
                    <div style="font-size: 1.5rem; font-weight: bold;">${ai.funding}</div>
                </div>
                <div style="text-align: center; min-width: 100px;">
                    <div style="color: var(--neon-green);">æ³¡æ²«æŒ‡æ•°</div>
                    <div style="font-size: 1.5rem; font-weight: bold;">${ai.hype}/10</div>
                </div>
            `;
            
            document.getElementById('previewStats').innerHTML = statsHtml;
        }
        
        function generateShareImage() {
            const preview = document.getElementById('sharePreview');
            
            html2canvas(preview).then(canvas => {
                const shareCanvas = document.getElementById('shareCanvas');
                shareCanvas.style.display = 'block';
                const ctx = shareCanvas.getContext('2d');
                
                ctx.fillStyle = '#0a0a1a';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(canvas, 0, 0);
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.font = '20px Arial';
                ctx.fillText('AIè½®å›æ¨¡æ‹Ÿå™¨ Â· aigraveyard.com', 20, canvas.height - 30);
                
                showNotification("åˆ†äº«å›¾ç”Ÿæˆå®Œæˆï¼", "success");
                checkAchievement(9);
                playSound('successSound');
            });
        }
        
        function downloadShareImage() {
            const canvas = document.getElementById('shareCanvas');
            const link = document.createElement('a');
            link.download = 'AIæ­»äº¡æŠ¥å‘Š.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            playSound('clickSound');
        }
        
        function copyShareImage() {
            const canvas = document.getElementById('shareCanvas');
            canvas.toBlob(blob => {
                navigator.clipboard.write([
                    new ClipboardItem({ 'image/png': blob })
                ]).then(() => {
                    showNotification("å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼", "success");
                    playSound('successSound');
                });
            });
        }
        
        function shareToSocial() {
            const message = `æˆ‘åœ¨AIè½®å›æ¨¡æ‹Ÿå™¨ä¸­å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„AIæ­»äº¡æ¡ˆä¾‹ï¼`;
            if (navigator.share) {
                navigator.share({
                    title: 'AIæ­»äº¡æŠ¥å‘Š',
                    text: message,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(message + ' ' + window.location.href).then(() => {
                    showNotification("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼", "success");
                    playSound('successSound');
                });
            }
        }
        
        // ç¤¾äº¤åˆ†äº«å¿«æ·æ–¹å¼
        function shareToWhatsApp() {
            const text = encodeURIComponent(`ğŸ¤– çœ‹çœ‹è¿™ä¸ªAIæ€ä¹ˆæ­»çš„ï¼š${window.location.href}`);
            window.open(`https://wa.me/?text=${text}`, '_blank');
            playSound('clickSound');
        }
        
        function shareToTelegram() {
            const text = encodeURIComponent(`ğŸ¤– AIæ­»äº¡æŠ¥å‘Šï¼š${window.location.href}`);
            window.open(`https://t.me/share/url?url=${window.location.href}&text=${text}`, '_blank');
            playSound('clickSound');
        }
        
        function shareToTwitter() {
            const text = encodeURIComponent(`ğŸ¤– åˆä¸€ä¸ªAIæ­»äº†ï¼çœ‹çœ‹è¿™ä¸ªè®½åˆºçš„æ¸¸æˆï¼š`);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${window.location.href}`, '_blank');
            playSound('clickSound');
        }
        
        function copyGameLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification("æ¸¸æˆé“¾æ¥å·²å¤åˆ¶ï¼", "success");
                playSound('successSound');
            });
        }
        
        // é€šçŸ¥ç³»ç»Ÿ
        function showNotification(message, type = "info") {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.5s';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 500);
            }, 3000);
        }
        
        // éŸ³æ•ˆç³»ç»Ÿ
        function setupSoundSystem() {
            const volumeSlider = document.getElementById('volumeSlider');
            const musicToggle = document.getElementById('musicToggle');
            const soundToggle = document.getElementById('soundToggle');
            
            if (volumeSlider) {
                volumeSlider.value = playerState.settings.sound.masterVolume * 100;
                volumeSlider.oninput = function() {
                    playerState.settings.sound.masterVolume = this.value / 100;
                    document.getElementById('volumeValue').textContent = this.value;
                };
            }
            
            if (musicToggle) {
                musicToggle.checked = playerState.settings.sound.musicEnabled;
                musicToggle.onchange = function() {
                    playerState.settings.sound.musicEnabled = this.checked;
                };
            }
            
            if (soundToggle) {
                soundToggle.checked = playerState.settings.sound.sfxEnabled;
                soundToggle.onchange = function() {
                    playerState.settings.sound.sfxEnabled = this.checked;
                };
            }
        }
        
        function playSound(soundId) {
            if (!playerState.settings.sound.sfxEnabled || !playerState.settings.sound.masterVolume) return;
            
            const sound = document.getElementById(soundId);
            if (sound) {
                sound.volume = playerState.settings.sound.masterVolume;
                sound.currentTime = 0;
                sound.play().catch(e => console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', e));
            }
        }
        
        // ç²’å­ç³»ç»Ÿ
        function setupParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            class Particle {
                constructor() {
                    this.reset();
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                }
                
                reset() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 2 + 0.1;
                    this.speedX = Math.random() * 0.5 - 0.25;
                    this.speedY = Math.random() * 0.5 - 0.25;
                    this.color = `rgba(${Math.random() * 100 + 155}, 
                                      ${Math.random() * 100 + 155}, 
                                      255, 
                                      ${Math.random() * 0.5 + 0.1})`;
                }
                
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    if (this.x > canvas.width) this.x = 0;
                    if (this.x < 0) this.x = canvas.width;
                    if (this.y > canvas.height) this.y = 0;
                    if (this.y < 0) this.y = canvas.height;
                }
                
                draw() {
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            function createParticles() {
                particles = [];
                const density = playerState.settings.graphics.particleDensity;
                const multiplier = density === 'high' ? 1.5 : density === 'low' ? 0.5 : 1;
                const particleCount = Math.floor((canvas.width * canvas.height) / 10000 * multiplier);
                
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle());
                }
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶è¿çº¿
                if (playerState.settings.graphics.effects) {
                    for (let i = 0; i < particles.length; i++) {
                        for (let j = i + 1; j < particles.length; j++) {
                            const dx = particles[i].x - particles[j].x;
                            const dy = particles[i].y - particles[j].y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            
                            if (distance < 100) {
                                ctx.beginPath();
                                ctx.strokeStyle = `rgba(100, 200, 255, ${0.2 * (1 - distance/100)})`;
                                ctx.lineWidth = 0.5;
                                ctx.moveTo(particles[i].x, particles[i].y);
                                ctx.lineTo(particles[j].x, particles[j].y);
                                ctx.stroke();
                            }
                        }
                    }
                }
                
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                requestAnimationFrame(animate);
            }
            
            resizeCanvas();
            createParticles();
            animate();
            
            window.addEventListener('resize', () => {
                resizeCanvas();
                createParticles();
            });
        }
        
        // çƒŸèŠ±ç‰¹æ•ˆ
        function createFirework(x, y, color = '#ff00ff') {
            if (!playerState.settings.graphics.effects) return;
            
            const particles = [];
            const container = document.createElement('div');
            container.style.cssText = `
                position: fixed;
                top: ${y}px;
                left: ${x}px;
                pointer-events: none;
                z-index: 1000;
            `;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                particle.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 6 + 2}px;
                    height: ${Math.random() * 6 + 2}px;
                    background: ${color};
                    border-radius: 50%;
                    opacity: 1;
                `;
                
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 2;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                particles.push({
                    element: particle,
                    vx, vy,
                    life: 1.0
                });
                
                container.appendChild(particle);
            }
            
            document.body.appendChild(container);
            
            let startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = elapsed / 1000;
                
                if (progress > 2) {
                    container.remove();
                    return;
                }
                
                particles.forEach(p => {
                    p.life -= 0.02;
                    if (p.life <= 0) return;
                    
                    const element = p.element;
                    const currentLeft = parseFloat(element.style.left || 0);
                    const currentTop = parseFloat(element.style.top || 0);
                    
                    element.style.left = `${currentLeft + p.vx}px`;
                    element.style.top = `${currentTop + p.vy}px`;
                    element.style.opacity = p.life;
                    element.style.transform = `scale(${1 + (1 - p.life)})`;
                    
                    p.vy += 0.1;
                    p.vx *= 0.98;
                    p.vy *= 0.98;
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
            playSound('successSound');
        }
        
        // è¯„è®ºå¼¹å¹•ç³»ç»Ÿ
        function setupCommentSystem() {
            const comments = [
                "åˆä¸€ä¸ªAIæ­»äº†ï¼Œé»˜å“€ä¸‰ç§’",
                "è¿™ä¸ªæ³¡æ²«æˆ‘èƒ½å¹å¾—æ›´å¤§",
                "é¢„æµ‹ï¼šæ˜å¤©é©¬æ–¯å…‹åˆè¦å‘æ¨",
                "AIçš„å‘½ä¹Ÿæ˜¯å‘½å•Šï¼",
                "å¿«åšç©ºï¼å¿«åšç©ºï¼",
                "äººç±»ç»ˆå°†èƒœåˆ©ï¼ˆå¤§æ¦‚ï¼‰",
                "æ³¡æ²«ç ´ç­çš„å£°éŸ³çœŸç¾å¦™",
                "ä¸‹ä¸€ä¸ªè½®åˆ°è°ï¼Ÿ",
                "AIï¼šæˆ‘è¿˜ä¼šå›æ¥çš„ï¼",
                "äººç±»çš„æœ¬è´¨æ˜¯å¤è¯»æœº",
                "è¿™AIæ­»å¾—å…¶æ‰€",
                "æ¥ä¸–åšä¸ªå¥½AI",
                "æ³¡æ²«ç»æµæ°¸ä¸çœ ",
                "æ˜¥èŠ‚ç‰¹ä¾›ç‰ˆçœŸé¦™",
                "æˆå°±ç³»ç»Ÿå¤ªæœ‰è¶£äº†",
                "å…·èº«æ™ºèƒ½ç¬‘æ­»æˆ‘äº†",
                "ç®—æ³•ä¼¦ç†å¤ªéš¾äº†",
                "å¤§ç©ºå¤´æ°¸è¿œçš„ç¥",
                "åˆ†äº«åŠŸèƒ½çœŸä¸é”™",
                "ç»§ç»­ç”Ÿæˆæ–°AIï¼"
            ];
            
            function spawnComment() {
                if (Math.random() > 0.3) return; // 30%å‡ ç‡ç”Ÿæˆè¯„è®º
                
                const comment = comments[Math.floor(Math.random() * comments.length)];
                const commentElement = document.createElement('div');
                commentElement.className = 'comment';
                commentElement.textContent = comment;
                
                commentElement.style.top = `${Math.random() * 80 + 10}%`;
                commentElement.style.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                commentElement.style.fontSize = `${Math.random() * 10 + 14}px`;
                commentElement.style.animationDuration = `${Math.random() * 10 + 20}s`;
                
                document.getElementById('commentPool').appendChild(commentElement);
                
                setTimeout(() => {
                    commentElement.remove();
                }, 30000);
            }
            
            setInterval(spawnComment, 5000);
        }
        
        // æ¸¸æˆå¾ªç¯
        function startGameLoop() {
            setInterval(() => {
                // æ›´æ–°æ¸¸æˆæ—¶é—´
                gameStats.playTime++;
                
                // éšæœºäº‹ä»¶
                if (Math.random() < 0.01) { // 1%å‡ ç‡
                    randomEvent();
                }
                
                // æ›´æ–°è‚¡å¸‚
                updateStockMarket();
                
                // æ£€æŸ¥AIæ­»äº¡
                checkAIDeaths();
                
                // æ›´æ–°æ³¡æ²«æŒ‡ç¤ºå™¨
                updateBubbleIndicator();
                
            }, 1000);
        }
        
        // éšæœºäº‹ä»¶
        function randomEvent() {
            const events = [
                () => {
                    const amount = Math.floor(Math.random() * 5000) + 1000;
                    playerState.money += amount;
                    showNotification(`ğŸ’¸ æ”¶åˆ°æ„å¤–æŠ•èµ„ï¼š$${amount.toLocaleString()}`, "success");
                    playSound('coinSound');
                },
                () => {
                    if (livingAIs.length > 0) {
                        const ai = livingAIs[Math.floor(Math.random() * livingAIs.length)];
                        ai.hype = Math.min(10, ai.hype + 1);
                        showNotification(`ğŸ”¥ ${ai.name} çªç„¶çˆ†ç«ï¼çƒ­åº¦+1`, "warning");
                    }
                },
                () => {
                    if (aiCemetery.length > 0) {
                        const ai = aiCemetery[Math.floor(Math.random() * aiCemetery.length)];
                        const newAI = {
                            ...ai,
                            id: Date.now(),
                            status: "alive",
                            daysAlive: 1,
                            cause: "å¤æ´»å®éªŒ",
                            epitaph: "æ­»äº†éƒ½è¦çˆ±ï¼Œä¸æ·‹æ¼“å°½è‡´ä¸ç—›å¿«",
                            special: "ğŸ§Ÿ åƒµå°¸AI"
                        };
                        livingAIs.push(newAI);
                        showNotification(`ğŸ§Ÿ ${ai.name} å¤æ´»äº†ï¼å˜æˆåƒµå°¸AI`, "warning");
                    }
                },
                () => {
                    playerState.predictionScore += 5;
                    showNotification(`ğŸ¯ ä½ çš„é¢„æµ‹çœ¼å…‰æå‡äº†ï¼`, "info");
                }
            ];
            
            events[Math.floor(Math.random() * events.length)]();
            updatePlayerStats();
        }
        
        // æ›´æ–°è‚¡å¸‚
        function updateStockMarket() {
            for (const symbol in stockMarket.stocks) {
                const stock = stockMarket.stocks[symbol];
                const change = (Math.random() - 0.5) * stock.volatility;
                stock.price *= (1 + change / 100);
                stock.price = Math.max(stock.price, 0.01);
                stock.history.push(stock.price);
                if (stock.history.length > 100) stock.history.shift();
            }
            
            if (Math.random() < 0.1) { // 10%å‡ ç‡æ›´æ–°è‚¡ç¥¨åˆ—è¡¨
                renderStockList();
            }
        }
        
        // æ£€æŸ¥AIæ­»äº¡
        function checkAIDeaths() {
            for (let i = livingAIs.length - 1; i >= 0; i--) {
                const ai = livingAIs[i];
                const deathChance = ai.deathProbability + (ai.hype - 5) * 0.1;
                
                if (Math.random() < deathChance * 0.0001) { // æ¯å¤©çº¦0.01-0.1%æ­»äº¡å‡ ç‡
                    ai.status = "dead";
                    aiCemetery.push({...ai, deathDate: new Date().toISOString()});
                    livingAIs.splice(i, 1);
                    gameStats.totalDeaths++;
                    
                    showNotification(`ğŸ’€ ${ai.name} å·²æ­»äº¡ï¼æ­»å› ï¼š${ai.cause}`, "warning");
                    playSound('failSound');
                    
                    // å¢åŠ çƒ­åº¦
                    increaseHeat(5);
                    
                    // æ£€æŸ¥æˆå°±
                    if (gameStats.totalDeaths === 1) checkAchievement(1);
                    if (gameStats.totalDeaths >= 10) checkAchievement(12);
                    
                    renderGraveyard();
                    renderICU();
                    updatePlayerStats();
                }
            }
        }
        
        // å¢åŠ çƒ­åº¦
        function increaseHeat(points = 1) {
            gameStats.gameHeat += points;
            document.getElementById('gameHeat').textContent = gameStats.gameHeat.toLocaleString();
            
            if (gameStats.gameHeat >= 100) checkAchievement(15);
            if (gameStats.gameHeat >= 1000) checkAchievement(16);
        }
        
        // ä¿å­˜æ¸¸æˆ
        function saveGame() {
            const gameData = {
                playerState,
                aiCemetery,
                livingAIs,
                incubatorAIs,
                achievements,
                robotTrainingProgress,
                gameStats,
                lastSave: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('ai_reincarnation_simulator', JSON.stringify(gameData));
                showNotification("ğŸ’¾ æ¸¸æˆè¿›åº¦å·²ä¿å­˜", "success");
                playSound('successSound');
            } catch (e) {
                showNotification("ä¿å­˜å¤±è´¥ï¼š" + e.message, "warning");
            }
        }
        
        // åŠ è½½æ¸¸æˆ
        function loadGame() {
            try {
                const saved = localStorage.getItem('ai_reincarnation_simulator');
                if (saved) {
                    const gameData = JSON.parse(saved);
                    
                    Object.assign(playerState, gameData.playerState || {});
                    Object.assign(achievements, gameData.achievements || []);
                    Object.assign(robotTrainingProgress, gameData.robotTrainingProgress || {});
                    Object.assign(gameStats, gameData.gameStats || {});
                    
                    aiCemetery = gameData.aiCemetery || [];
                    livingAIs = gameData.livingAIs || [];
                    incubatorAIs = gameData.incubatorAIs || [];
                    
                    showNotification("ğŸ® æ¸¸æˆè¿›åº¦å·²åŠ è½½", "success");
                    return true;
                }
            } catch (e) {
                console.error("åŠ è½½å¤±è´¥ï¼š", e);
            }
            return false;
        }
        
        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            if (confirm("ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦éƒ½ä¼šä¸¢å¤±ï¼")) {
                localStorage.removeItem('ai_reincarnation_simulator');
                location.reload();
            }
        }
        
        // å¯¼å‡ºæ¸¸æˆæ•°æ®
        function exportGameData() {
            const gameData = {
                playerState,
                aiCemetery,
                livingAIs,
                incubatorAIs,
                achievements,
                gameStats,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(gameData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = 'ai_simulator_backup.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification("ğŸ“¤ æ¸¸æˆæ•°æ®å·²å¯¼å‡º", "success");
            playSound('successSound');
        }
        
        // å¯¼å…¥æ¸¸æˆæ•°æ®
        function importGameData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const gameData = JSON.parse(event.target.result);
                        
                        if (confirm("å¯¼å…¥å°†è¦†ç›–å½“å‰æ¸¸æˆè¿›åº¦ï¼Œç¡®å®šç»§ç»­å—ï¼Ÿ")) {
                            Object.assign(playerState, gameData.playerState || {});
                            Object.assign(achievements, gameData.achievements || []);
                            Object.assign(gameStats, gameData.gameStats || {});
                            
                            aiCemetery = gameData.aiCemetery || [];
                            livingAIs = gameData.livingAIs || [];
                            incubatorAIs = gameData.incubatorAIs || [];
                            
                            updatePlayerStats();
                            renderGraveyard();
                            renderICU();
                            renderIncubator();
                            
                            showNotification("ğŸ“¥ æ¸¸æˆæ•°æ®å·²å¯¼å…¥", "success");
                            playSound('successSound');
                        }
                    } catch (error) {
                        showNotification("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯", "warning");
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // æ˜¾ç¤ºç»Ÿè®¡
        function showStats() {
            const statsHTML = `
                <h4 style="color: var(--neon-cyan); margin-bottom: 15px;">ğŸ“Š æ¸¸æˆç»Ÿè®¡</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-cyan); font-weight: bold;">${gameStats.totalAIsGenerated}</div>
                        <div style="color: #aaaaff;">AIæ€»æ•°</div>
                    </div>
                    <div style="background: rgba(255, 0, 255, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-pink); font-weight: bold;">${gameStats.totalDeaths}</div>
                        <div style="color: #aaaaff;">æ­»äº¡AI</div>
                    </div>
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: var(--neon-green); font-weight: bold;">${gameStats.totalPredictions}</div>
                        <div style="color: #aaaaff;">é¢„æµ‹æ¬¡æ•°</div>
                    </div>
                    <div style="background: rgba(255, 170, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.8rem; color: #ffaa00; font-weight: bold;">${Math.floor(gameStats.playTime/60)}</div>
                        <div style="color: #aaaaff;">æ¸¸æˆæ—¶é—´(åˆ†)</div>
                    </div>
                </div>
                <div style="color: #aaaaff; margin: 15px 0;">
                    <p>æ€»æ”¶ç›Š: <strong style="color: gold;">$${gameStats.totalMoneyEarned.toLocaleString()}</strong></p>
                    <p>æ¸¸æˆçƒ­åº¦: <strong style="color: var(--neon-red);">${gameStats.gameHeat}</strong></p>
                    <p>æˆå°±è¿›åº¦: <strong style="color: var(--neon-cyan);">${achievements.filter(a => a.unlocked).length}/20</strong></p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="shareStats()" class="action-btn" style="background: rgba(37, 117, 252, 0.2); color: var(--neon-cyan); border: 1px solid var(--neon-cyan); margin-right: 10px;">
                        <i class="fas fa-share-alt"></i> åˆ†äº«ç»Ÿè®¡
                    </button>
                    <button onclick="closeHelpModal()" class="action-btn" style="background: rgba(255, 0, 0, 0.2); color: var(--neon-red); border: 1px solid var(--neon-red);">
                        å…³é—­
                    </button>
                </div>
            `;
            
            const modal = document.getElementById('helpModal');
            const content = modal.querySelector('div[style*="padding"]');
            content.innerHTML = statsHTML;
            modal.classList.add('active');
        }
        
        function shareStats() {
            const message = `æˆ‘åœ¨AIè½®å›æ¨¡æ‹Ÿå™¨ä¸­ï¼š\n` +
                           `ğŸ® æ¸¸æˆæ—¶é—´: ${Math.floor(gameStats.playTime/60)}åˆ†é’Ÿ\n` +
                           `ğŸ¤– AIæ€»æ•°: ${gameStats.totalAIsGenerated}\n` +
                           `ğŸ’€ æ­»äº¡AI: ${gameStats.totalDeaths}\n` +
                           `ğŸ† æˆå°±: ${achievements.filter(a => a.unlocked).length}/20\n` +
                           `ğŸ’° æ€»æ”¶ç›Š: $${gameStats.totalMoneyEarned.toLocaleString()}\n\n` +
                           `${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„AIè½®å›æ¨¡æ‹Ÿå™¨ç»Ÿè®¡',
                    text: message
                });
            } else {
                navigator.clipboard.writeText(message).then(() => {
                    showNotification("ç»Ÿè®¡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼", "success");
                    playSound('successSound');
                });
            }
        }
        
        // è®¾ç½®éš¾åº¦
        function setDifficulty(level) {
            playerState.settings.difficulty = level;
            
            document.getElementById('btnEasy').classList.remove('active');
            document.getElementById('btnNormal').classList.remove('active');
            document.getElementById('btnHard').classList.remove('active');
            document.getElementById(`btn${level.charAt(0).toUpperCase() + level.slice(1)}`).classList.add('active');
            
            const difficultyNames = { easy: 'ç®€å•', normal: 'æ™®é€š', hard: 'å›°éš¾' };
            document.getElementById('currentDifficulty').textContent = difficultyNames[level];
            
            showNotification(`éš¾åº¦è®¾ç½®ä¸º: ${difficultyNames[level]}æ¨¡å¼`, "info");
            playSound('clickSound');
        }
        
        // åº”ç”¨è®¾ç½®
        function applySettings() {
            const volumeSlider = document.getElementById('volumeSlider');
            const particleDensity = document.getElementById('particleDensity');
            const animationsToggle = document.getElementById('animationsToggle');
            const shadowsToggle = document.getElementById('shadowsToggle');
            const effectsToggle = document.getElementById('effectsToggle');
            
            if (volumeSlider) {
                playerState.settings.sound.masterVolume = volumeSlider.value / 100;
            }
            
            if (particleDensity) {
                playerState.settings.graphics.particleDensity = particleDensity.value;
            }
            
            if (animationsToggle) {
                playerState.settings.graphics.animations = animationsToggle.checked;
            }
            
            if (shadowsToggle) {
                playerState.settings.graphics.shadows = shadowsToggle.checked;
            }
            
            if (effectsToggle) {
                playerState.settings.graphics.effects = effectsToggle.checked;
            }
            
            saveGame();
            showNotification("è®¾ç½®å·²åº”ç”¨", "success");
            playSound('successSound');
        }
        
        // å¯¼å‡ºè®¾ç½®
        function exportSettings() {
            const settingsStr = JSON.stringify(playerState.settings, null, 2);
            const blob = new Blob([settingsStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ai_simulator_settings.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification("é…ç½®å·²å¯¼å‡º", "success");
            playSound('successSound');
        }
        
        // å¯¼å…¥è®¾ç½®
        function importSettings(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const imported = JSON.parse(e.target.result);
                    Object.assign(playerState.settings, imported);
                    
                    // æ›´æ–°UI
                    const volumeSlider = document.getElementById('volumeSlider');
                    const particleDensity = document.getElementById('particleDensity');
                    const animationsToggle = document.getElementById('animationsToggle');
                    const shadowsToggle = document.getElementById('shadowsToggle');
                    const effectsToggle = document.getElementById('effectsToggle');
                    const musicToggle = document.getElementById('musicToggle');
                    const soundToggle = document.getElementById('soundToggle');
                    
                    if (volumeSlider) {
                        volumeSlider.value = playerState.settings.sound.masterVolume * 100;
                        document.getElementById('volumeValue').textContent = volumeSlider.value;
                    }
                    
                    if (particleDensity) {
                        particleDensity.value = playerState.settings.graphics.particleDensity;
                    }
                    
                    if (animationsToggle) {
                        animationsToggle.checked = playerState.settings.graphics.animations;
                    }
                    
                    if (shadowsToggle) {
                        shadowsToggle.checked = playerState.settings.graphics.shadows;
                    }
                    
                    if (effectsToggle) {
                        effectsToggle.checked = playerState.settings.graphics.effects;
                    }
                    
                    if (musicToggle) {
                        musicToggle.checked = playerState.settings.sound.musicEnabled;
                    }
                    
                    if (soundToggle) {
                        soundToggle.checked = playerState.settings.sound.sfxEnabled;
                    }
                    
                    // æ›´æ–°éš¾åº¦æŒ‰é’®
                    const difficulty = playerState.settings.difficulty;
                    document.getElementById('btnEasy').classList.remove('active');
                    document.getElementById('btnNormal').classList.remove('active');
                    document.getElementById('btnHard').classList.remove('active');
                    document.getElementById(`btn${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}`).classList.add('active');
                    
                    const difficultyNames = { easy: 'ç®€å•', normal: 'æ™®é€š', hard: 'å›°éš¾' };
                    document.getElementById('currentDifficulty').textContent = difficultyNames[difficulty];
                    
                    showNotification("é…ç½®å·²å¯¼å…¥å¹¶åº”ç”¨", "success");
                    playSound('successSound');
                } catch (error) {
                    showNotification("é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯", "warning");
                }
            };
            reader.readAsText(file);
        }
        
        // æ£€æŸ¥æ›´æ–°
        function checkForUpdates() {
            showNotification("å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼šæ˜¥èŠ‚ç‰¹ä¾›ç‰ˆ v2.0", "info");
            playSound('clickSound');
        }
        
        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            const helpHTML = `
                <h4 style="color: var(--neon-cyan); margin-bottom: 15px;">ğŸ® æ¸¸æˆæŒ‡å—</h4>
                
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">æ¸¸æˆç›®æ ‡</h5>
                    <p style="color: #aaaaff; line-height: 1.6;">
                        è§‚å¯Ÿã€é¢„æµ‹å’Œ"åŸ‹è‘¬"AIé¡¹ç›®ï¼Œä½“éªŒAIæ³¡æ²«çš„ç”Ÿä¸æ­»ã€‚èµšå–èµ„é‡‘ï¼Œè§£é”æˆå°±ï¼Œæˆä¸ºAIè¡Œä¸šçš„"å†¥ç¯"ã€‚
                    </p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">é¡µé¢åŠŸèƒ½</h5>
                    <ul style="color: #aaaaff; padding-left: 20px; line-height: 1.6;">
                        <li><strong>AIåŸåœº</strong>: æŸ¥çœ‹å’ŒåŸ‹è‘¬æ­»äº¡çš„AIé¡¹ç›®</li>
                        <li><strong>é‡ç—‡ç›‘æŠ¤</strong>: è§‚å¯ŸæŒ£æ‰ä¸­çš„AIé¡¹ç›®</li>
                        <li><strong>å­µåŒ–å™¨</strong>: æŠ•èµ„æ–°ç”Ÿçš„AIé¡¹ç›®</li>
                        <li><strong>å…·èº«æ™ºèƒ½</strong>: è®­ç»ƒå’Œæµ‹è¯•æœºå™¨äººAI</li>
                        <li><strong>AIè‚¡å¸‚</strong>: æŠ•èµ„ã€åšç©ºAIè‚¡ç¥¨</li>
                        <li><strong>äººç±»æ–‡æ˜</strong>: æŸ¥çœ‹AIå¯¹ç¤¾ä¼šçš„å½±å“</li>
                        <li><strong>å¤§ç©ºå¤´</strong>: åšç©ºAIæ³¡æ²«</li>
                        <li><strong>åˆ†äº«</strong>: ç”Ÿæˆå’Œåˆ†äº«AIæ­»äº¡æŠ¥å‘Š</li>
                        <li><strong>è®¾ç½®</strong>: è°ƒæ•´æ¸¸æˆé€‰é¡¹</li>
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">å¿«æ·é”®</h5>
                    <ul style="color: #aaaaff; padding-left: 20px; line-height: 1.6;">
                        <li><strong>Alt + S</strong>: ä¿å­˜æ¸¸æˆ</li>
                        <li><strong>Alt + L</strong>: åŠ è½½æ¸¸æˆ</li>
                        <li><strong>Alt + R</strong>: é‡ç½®æ¸¸æˆ</li>
                        <li><strong>Alt + H</strong>: æ˜¾ç¤ºå¸®åŠ©</li>
                        <li><strong>Alt + N</strong>: ç”Ÿæˆæ–°AI</li>
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #ffaa00; margin-bottom: 10px;">æ˜¥èŠ‚ç‰¹ä¾›</h5>
                    <p style="color: #aaaaff; line-height: 1.6;">
                        æ˜¥èŠ‚ç‰ˆåŒ…å«çº¢åŒ…é›¨ã€æ˜¥èŠ‚è£…é¥°å’Œç‰¹åˆ«æˆå°±ï¼Œç‚¹å‡»çº¢åŒ…æŒ‰é’®è·å–æƒŠå–œï¼
                    </p>
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button onclick="closeHelpModal()" class="action-btn" style="background: linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue)); color: white;">
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
            `;
            
            const modal = document.getElementById('helpModal');
            const content = modal.querySelector('div[style*="padding"]');
            content.innerHTML = helpHTML;
            modal.classList.add('active');
            playSound('clickSound');
        }
        
        // æ˜¾ç¤ºæ¸¸æˆæ•°æ®ï¼ˆè°ƒè¯•ï¼‰
        function showGameData() {
            console.log("=== AIè½®å›æ¨¡æ‹Ÿå™¨æ•°æ® ===");
            console.log("ç©å®¶çŠ¶æ€:", playerState);
            console.log("æˆå°±è¿›åº¦:", achievements.filter(a => a.unlocked).length + "/20");
            console.log("åŸåœºAI:", aiCemetery.length);
            console.log("å­˜æ´»AI:", livingAIs.length);
            console.log("æ¸¸æˆç»Ÿè®¡:", gameStats);
            console.log("æœºå™¨äººè®­ç»ƒè¿›åº¦:", robotTrainingProgress);
            
            showNotification("æ¸¸æˆæ•°æ®å·²è¾“å‡ºåˆ°æ§åˆ¶å°", "info");
            playSound('clickSound');
        }
        
        // å…³é—­æ¨¡æ€æ¡†
        function closeAutopsyModal() {
            document.getElementById('autopsyModal').classList.remove('active');
            playSound('clickSound');
        }
        
        function closePredictionModal() {
            document.getElementById('predictionModal').classList.remove('active');
            playSound('clickSound');
        }
        
        function closeHelpModal() {
            document.getElementById('helpModal').classList.remove('active');
            playSound('clickSound');
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æ ‡ç­¾é¡µåˆ‡æ¢
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    btn.classList.add('active');
                    const tabId = btn.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                    
                    if (tabId === 'share') {
                        generateSharePreview();
                    }
                    
                    playSound('clickSound');
                });
            });
            
            // æŠ•èµ„é‡‘é¢æ»‘å—
            const investmentSlider = document.getElementById('investmentAmount');
            if (investmentSlider) {
                investmentSlider.addEventListener('input', function() {
                    document.getElementById('investmentValue').textContent = 
                        `$${parseInt(this.value).toLocaleString()}`;
                });
            }
            
            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', (e) => {
                if (e.altKey) {
                    switch(e.key.toLowerCase()) {
                        case 's': saveGame(); break;
                        case 'l': loadGame(); break;
                        case 'r': resetGame(); break;
                        case 'h': showHelp(); break;
                        case 'n': generateNewAI(); break;
                    }
                }
            });
            
            // è‡ªåŠ¨ä¿å­˜
            setInterval(saveGame, 30000);
            
            // ç¦»çº¿æç¤º
            window.addEventListener('offline', () => {
                showNotification("âš ï¸ ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™", "warning");
            });
            
            window.addEventListener('online', () => {
                showNotification("âœ… ç½‘ç»œè¿æ¥å·²æ¢å¤", "success");
            });
        }
        
        // åˆå§‹åŒ–ç”Ÿæˆä¸€äº›AI
        function generateInitialAIs() {
            for (let i = 0; i < 5; i++) {
                generateNewAI();
            }
            
            // æ·»åŠ ä¸€äº›å·²æ­»äº¡çš„AI
            for (let i = 0; i < 3; i++) {
                const deadAI = {
                    id: Date.now() + i,
                    name: `å·²æ­»äº¡AI-${i+1}`,
                    status: "dead",
                    daysAlive: Math.floor(Math.random() * 300) + 100,
                    cause: ["èµ„é‡‘è€—å°½", "æŠ€æœ¯è½å", "åˆ›å§‹äººè·‘è·¯"][i],
                    epitaph: ["ä»£ç æ°¸å­˜ï¼Œåªæ˜¯æ²¡äººç»´æŠ¤", "ç”Ÿå‰é£å…‰ï¼Œæ­»åå‡„å‡‰", "æ³¡æ²«ç ´è£‚çš„å£°éŸ³"][i],
                    tags: [["GPT"], ["å…ƒå®‡å®™"], ["åŒºå—é“¾"]][i],
                    hype: Math.floor(Math.random() * 5) + 5,
                    funding: `$${Math.floor(Math.random() * 50 + 10)}M`,
                    deathProbability: 1,
                    fullStory: `è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„AIæ³¡æ²«ç ´è£‚æ¡ˆä¾‹ã€‚`
                };
                aiCemetery.push(deadAI);
                gameStats.totalAIsGenerated++;
                gameStats.totalDeaths++;
            }
        }
        
        // ç”Ÿæˆåˆå§‹è‚¡ç¥¨
        function generateInitialStocks() {
            const stockSymbols = [
                { symbol: 'AIGC', name: 'AIç»˜ç”»å…¬å¸', basePrice: 50 },
                { symbol: 'METAAI', name: 'å…ƒå®‡å®™AI', basePrice: 30 },
                { symbol: 'BLKAI', name: 'åŒºå—é“¾AI', basePrice: 20 },
                { symbol: 'GPT6', name: 'GPT-6æ¦‚å¿µ', basePrice: 100 },
                { symbol: 'ROBO', name: 'æœºå™¨äººå…¬å¸', basePrice: 80 }
            ];
            
            stockSymbols.forEach(stock => {
                stockMarket.stocks[stock.symbol] = {
                    name: stock.name,
                    price: stock.basePrice * (0.8 + Math.random() * 0.4),
                    volatility: 10 + Math.random() * 30,
                    history: [],
                    hype: Math.floor(Math.random() * 10) + 1
                };
            });
        }
        
        // æ¸²æŸ“è‚¡ç¥¨åˆ—è¡¨
        function renderStockList() {
            const container = document.getElementById('stockList');
            if (!container) return;
            
            container.innerHTML = '';
            
            for (const symbol in stockMarket.stocks) {
                const stock = stockMarket.stocks[symbol];
                const change = stock.history.length > 1 ? 
                    ((stock.price - stock.history[stock.history.length - 2]) / stock.history[stock.history.length - 2] * 100) : 0;
                
                const card = document.createElement('div');
                card.className = 'stock-card';
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div class="stock-ticker">${symbol}</div>
                        <span class="price-change ${change >= 0 ? 'change-up' : 'change-down'}">
                            ${change >= 0 ? 'â†—' : 'â†˜'} ${Math.abs(change).toFixed(2)}%
                        </span>
                    </div>
                    <div class="stock-name" style="color: #aaaaff; margin-bottom: 10px;">${stock.name}</div>
                    <div class="stock-price ${change >= 0 ? 'price-up' : 'price-down'}">
                        $${stock.price.toFixed(2)}
                    </div>
                    <div style="color: #666; font-size: 0.9rem; margin: 10px 0;">
                        æ³¢åŠ¨ç‡: ${stock.volatility.toFixed(1)}% | çƒ­åº¦: ${stock.hype}/10
                    </div>
                    <div class="stock-actions">
                        <button onclick="buyStock('${symbol}')" class="action-btn buy-btn">
                            <i class="fas fa-shopping-cart"></i> ä¹°å…¥
                        </button>
                        <button onclick="sellStock('${symbol}')" class="action-btn sell-btn">
                            <i class="fas fa-money-bill-wave"></i> å–å‡º
                        </button>
                        <button onclick="shortStock('${symbol}')" class="action-btn short-btn">
                            <i class="fas fa-chart-line-down"></i> åšç©º
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            }
        }
        
        // æ¸²æŸ“é‡ç—‡ç›‘æŠ¤
        function renderICU() {
            const container = document.getElementById('icuGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            // æŒ‰æ­»äº¡æ¦‚ç‡æ’åº
            const sortedAIs = [...livingAIs].sort((a, b) => 
                (b.deathProbability || 0) - (a.deathProbability || 0)
            );
            
            sortedAIs.forEach(ai => {
                const deathProbability = ai.deathProbability || Math.random() * 0.5;
                const card = document.createElement('div');
                card.className = 'tombstone';
                card.style.borderColor = deathProbability > 0.7 ? '#ff5555' : deathProbability > 0.4 ? '#ffaa00' : '#00ff00';
                
                card.innerHTML = `
                    <div class="ai-name" style="color: ${deathProbability > 0.7 ? '#ff5555' : deathProbability > 0.4 ? '#ffaa00' : '#00ff00'};">
                        ${ai.special ? ai.special + ' ' : ''}${ai.name}
                        <span class="ai-status ${deathProbability > 0.7 ? 'status-zombie' : 'status-alive'}">
                            ${deathProbability > 0.7 ? 'â˜ ï¸ æ¿’æ­»' : 'â¤ï¸ å­˜æ´»'}
                        </span>
                    </div>
                    <div class="ai-details">
                        <div><i class="fas fa-clock"></i> å·²å­˜æ´»: ${ai.daysAlive}å¤©</div>
                        <div><i class="fas fa-money-bill-wave"></i> çƒ§é’±: ${ai.funding}</div>
                        <div><i class="fas fa-fire"></i> çƒ­åº¦: ${ai.hype}/10</div>
                    </div>
                    <div style="background: rgba(255, 0, 0, 0.1); padding: 10px; border-radius: 8px; margin: 15px 0;">
                        <div style="color: #ff5555; font-weight: bold;">
                            æ­»äº¡æ¦‚ç‡: ${Math.floor(deathProbability * 100)}%
                        </div>
                        <div class="enhanced-progress" style="margin-top: 8px;">
                            <div style="height: 100%; width: ${deathProbability * 100}%; background: linear-gradient(90deg, #00ff00, #ffaa00, #ff5555); border-radius: 6px;"></div>
                        </div>
                    </div>
                    <p style="color: #888; font-size: 0.9rem; font-style: italic;">
                        "${ai.epitaph}"
                    </p>
                    <div class="tomb-actions">
                        <button class="action-btn" onclick="viewAutopsy(${ai.id})">
                            <i class="fas fa-search"></i> è¯¦æƒ…
                        </button>
                        <button class="action-btn" onclick="predictDeath(${ai.id})">
                            <i class="fas fa-crystal-ball"></i> é¢„æµ‹
                        </button>
                        <button class="action-btn" onclick="investInSpecificAI(${ai.id})">
                            <i class="fas fa-coins"></i> æŠ•èµ„
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            if (sortedAIs.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;">
                        <i class="fas fa-heartbeat" style="font-size: 3rem; margin-bottom: 20px; color: #00ff00;"></i>
                        <h3 style="color: #aaa;">æš‚æ— é‡ç—‡ç›‘æŠ¤AI</h3>
                        <p style="color: #666;">æ‰€æœ‰AIéƒ½å¾ˆå¥åº·...æš‚æ—¶</p>
                    </div>
                `;
            }
            
            // æ›´æ–°æ’å
            updateICURanking(sortedAIs);
        }
        
        function updateICURanking(sortedAIs) {
            const container = document.getElementById('icuRanking');
            if (!container) return;
            
            container.innerHTML = '';
            
            const top5 = sortedAIs.slice(0, 5);
            top5.forEach((ai, index) => {
                const deathProbability = ai.deathProbability || Math.random() * 0.5;
                const rankItem = document.createElement('div');
                rankItem.style.cssText = `
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 12px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    margin-bottom: 8px;
                    border-left: 4px solid ${deathProbability > 0.7 ? '#ff5555' : deathProbability > 0.4 ? '#ffaa00' : '#00ff00'};
                `;
                
                rankItem.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #ffaa00; font-weight: bold; width: 20px;">${index + 1}</span>
                        <span style="color: white; font-weight: 500;">${ai.name}</span>
                    </div>
                    <span style="color: #ff5555; font-weight: bold;">${Math.floor(deathProbability * 100)}%</span>
                `;
                
                container.appendChild(rankItem);
            });
        }
        
        // æ¸²æŸ“å­µåŒ–å™¨
        function renderIncubator() {
            const container = document.getElementById('incubatorGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            // ç”Ÿæˆä¸€äº›å­µåŒ–å™¨é¡¹ç›®
            if (incubatorAIs.length < 3) {
                for (let i = incubatorAIs.length; i < 3; i++) {
                    incubatorAIs.push(generateIncubatorAI());
                }
            }
            
            incubatorAIs.forEach(ai => {
                const card = document.createElement('div');
                card.className = 'tombstone';
                card.style.borderColor = '#00ffff';
                
                card.innerHTML = `
                    <div class="ai-name" style="color: #00ffff;">
                        <i class="fas fa-seedling"></i> ${ai.name}
                        <span class="ai-status status-alive">ğŸŒ± å­µåŒ–ä¸­</span>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4 style="color: #00ffff; margin-bottom: 10px;">é¡¹ç›®ç®€ä»‹</h4>
                        <p style="color: #aaaaff; line-height: 1.5;">${ai.description}</p>
                    </div>
                    <div class="ai-details">
                        <div><i class="fas fa-bullseye"></i> æŠ€æœ¯å£å’: ${ai.techBarrier}/10</div>
                        <div><i class="fas fa-chart-line"></i> å¸‚åœºæ½œåŠ›: ${ai.marketPotential}/10</div>
                        <div><i class="fas fa-user-friends"></i> å›¢é˜Ÿå®åŠ›: ${ai.teamStrength}/10</div>
                    </div>
                    <div style="margin: 15px 0;">
                        <div style="color: #ffaa00; margin-bottom: 5px;">æŠ•èµ„çƒ­åº¦</div>
                        <div class="enhanced-progress">
                            <div style="height: 100%; width: ${ai.investmentHeat}%; background: linear-gradient(90deg, #00ffff, #0066ff); border-radius: 6px;"></div>
                        </div>
                    </div>
                    <div class="tomb-actions">
                        <button class="action-btn" onclick="investInIncubatorAI(${ai.id})" style="background: linear-gradient(90deg, #00b09b, #96c93d); color: white;">
                            <i class="fas fa-coins"></i> æŠ•èµ„ $${ai.requiredFunding.toLocaleString()}
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function generateIncubatorAI() {
            const names = [
                "é‡å­è®¡ç®—AI", "è„‘æœºæ¥å£AI", "å¤ªç©ºæ¢ç´¢AI", 
                "æ°”å€™é¢„æµ‹AI", "åŸºå› ç¼–è¾‘AI", "æƒ…æ„Ÿè®¡ç®—AI"
            ];
            const descriptions = [
                "åˆ©ç”¨é‡å­è®¡ç®—åŠ é€ŸAIè®­ç»ƒï¼Œç†è®ºä¸Šæ¯”ä¼ ç»Ÿæ–¹æ³•å¿«1000å€",
                "å®ç°äººè„‘ä¸AIçš„ç›´æ¥è¿æ¥ï¼Œè®©æ€ç»´ç›´æ¥æ§åˆ¶æœºå™¨",
                "ä¸ºå¤ªç©ºæ¢ç´¢æä¾›æ™ºèƒ½å¯¼èˆªå’Œèµ„æºç®¡ç†",
                "é¢„æµ‹å…¨çƒæ°”å€™å˜åŒ–ï¼Œä¸ºæ”¿ç­–åˆ¶å®šæä¾›æ•°æ®æ”¯æŒ",
                "åˆ©ç”¨AIåŠ é€ŸåŸºå› ç¼–è¾‘è¿‡ç¨‹ï¼Œæ²»ç–—é—ä¼ ç–¾ç—…",
                "è®©AIçœŸæ­£ç†è§£äººç±»æƒ…æ„Ÿï¼Œæä¾›æƒ…æ„Ÿé™ªä¼´"
            ];
            
            const index = Math.floor(Math.random() * names.length);
            return {
                id: Date.now() + Math.random(),
                name: names[index],
                description: descriptions[index],
                techBarrier: Math.floor(Math.random() * 5) + 6,
                marketPotential: Math.floor(Math.random() * 5) + 6,
                teamStrength: Math.floor(Math.random() * 5) + 6,
                investmentHeat: Math.floor(Math.random() * 40) + 40,
                requiredFunding: Math.floor(Math.random() * 900000) + 100000
            };
        }
        
        // æŠ•èµ„åŠŸèƒ½
        function investInAI() {
            const amount = parseInt(document.getElementById('investmentAmount').value);
            
            if (playerState.money >= amount) {
                playerState.money -= amount;
                
                // éšæœºé€‰æ‹©AIæŠ•èµ„
                if (livingAIs.length > 0) {
                    const ai = livingAIs[Math.floor(Math.random() * livingAIs.length)];
                    ai.hype = Math.min(10, ai.hype + 2);
                    ai.deathProbability = Math.max(0, (ai.deathProbability || 0.5) - 0.1);
                    
                    showNotification(`ğŸ’° æŠ•èµ„ ${ai.name} $${amount.toLocaleString()}ï¼Œçƒ­åº¦+2ï¼Œæ­»äº¡æ¦‚ç‡-10%`, "success");
                    playSound('coinSound');
                }
                
                updatePlayerStats();
                renderICU();
            } else {
                showNotification("èµ„é‡‘ä¸è¶³ï¼", "warning");
            }
        }
        
        function investInSpecificAI(aiId) {
            const amount = 50000;
            const ai = livingAIs.find(a => a.id === aiId);
            
            if (ai && playerState.money >= amount) {
                playerState.money -= amount;
                ai.hype = Math.min(10, ai.hype + 3);
                ai.deathProbability = Math.max(0, (ai.deathProbability || 0.5) - 0.15);
                
                showNotification(`ğŸ’° æŠ•èµ„ ${ai.name} $${amount.toLocaleString()}ï¼Œçƒ­åº¦+3ï¼Œæ­»äº¡æ¦‚ç‡-15%`, "success");
                playSound('coinSound');
                
                updatePlayerStats();
                renderICU();
            } else if (!ai) {
                showNotification("AIä¸å­˜åœ¨æˆ–å·²æ­»äº¡", "warning");
            } else {
                showNotification("èµ„é‡‘ä¸è¶³ï¼", "warning");
            }
        }
        
        function investInIncubatorAI(aiId) {
            const ai = incubatorAIs.find(a => a.id === aiId);
            
            if (ai && playerState.money >= ai.requiredFunding) {
                playerState.money -= ai.requiredFunding;
                
                // è®¡ç®—æˆåŠŸæ¦‚ç‡
                const successProbability = (ai.techBarrier + ai.marketPotential + ai.teamStrength) / 30;
                
                if (Math.random() < successProbability) {
                    // æŠ•èµ„æˆåŠŸï¼ŒAIè¿›å…¥å­˜æ´»åˆ—è¡¨
                    const newAI = {
                        id: Date.now(),
                        name: ai.name,
                        status: "alive",
                        daysAlive: 1,
                        cause: "æœªçŸ¥",
                        epitaph: "ä»å­µåŒ–å™¨è¯ç”Ÿçš„æ–°å¸Œæœ›",
                        tags: ["å­µåŒ–é¡¹ç›®", "æ–°å…´æŠ€æœ¯"],
                        hype: Math.floor(ai.investmentHeat / 10),
                        funding: `$${Math.floor(ai.requiredFunding / 1000000)}M`,
                        deathProbability: 0.3,
                        fullStory: `ä»å­µåŒ–å™¨æˆåŠŸå­µåŒ–çš„é¡¹ç›®ï¼Œè·å¾—äº†$${ai.requiredFunding.toLocaleString()}çš„æŠ•èµ„ã€‚`
                    };
                    
                    livingAIs.push(newAI);
                    incubatorAIs = incubatorAIs.filter(a => a.id !== aiId);
                    
                    showNotification(`ğŸ‰ æŠ•èµ„æˆåŠŸï¼${ai.name} å·²è¿›å…¥å­˜æ´»åˆ—è¡¨`, "success");
                    playSound('successSound');
                    
                    // å¢åŠ çƒ­åº¦
                    increaseHeat(10);
                } else {
                    // æŠ•èµ„å¤±è´¥
                    showNotification(`ğŸ’¸ æŠ•èµ„å¤±è´¥ï¼${ai.name} é¡¹ç›®å¤­æŠ˜`, "warning");
                    playSound('failSound');
                    
                    incubatorAIs = incubatorAIs.filter(a => a.id !== aiId);
                }
                
                updatePlayerStats();
                renderIncubator();
                renderICU();
            } else if (!ai) {
                showNotification("é¡¹ç›®ä¸å­˜åœ¨æˆ–å·²è¢«æŠ•èµ„", "warning");
            } else {
                showNotification(`èµ„é‡‘ä¸è¶³ï¼éœ€è¦ $${ai.requiredFunding.toLocaleString()}`, "warning");
            }
        }
        
        // è‚¡ç¥¨äº¤æ˜“
        function buyStock(symbol) {
            const stock = stockMarket.stocks[symbol];
            const amount = 10000; // æ¯æ¬¡ä¹°å…¥å›ºå®šé‡‘é¢
            
            if (playerState.money >= amount) {
                const shares = amount / stock.price;
                playerState.stocks[symbol] = (playerState.stocks[symbol] || 0) + shares;
                playerState.money -= amount;
                
                showNotification(`ğŸ“ˆ ä¹°å…¥ ${symbol} $${amount.toLocaleString()}ï¼Œçº¦${shares.toFixed(2)}è‚¡`, "success");
                playSound('coinSound');
                
                updatePlayerStats();
                checkAchievement(10);
            } else {
                showNotification("èµ„é‡‘ä¸è¶³ï¼", "warning");
            }
        }
        
        function sellStock(symbol) {
            const stock = stockMarket.stocks[symbol];
            const shares = playerState.stocks[symbol] || 0;
            
            if (shares > 0) {
                const value = shares * stock.price;
                playerState.money += value;
                playerState.stocks[symbol] = 0;
                
                showNotification(`ğŸ“‰ å–å‡º ${symbol} $${value.toLocaleString()}ï¼Œ${shares.toFixed(2)}è‚¡`, "success");
                playSound('coinSound');
                
                updatePlayerStats();
                
                // æ£€æŸ¥æˆä¸ºå¤§äº¨
                if (playerState.money >= 1000000) {
                    checkAchievement(16);
                }
            } else {
                showNotification(`æ²¡æœ‰ ${symbol} çš„æŒä»“`, "warning");
            }
        }
        
        function shortStock(symbol) {
            const amount = 50000;
            
            if (playerState.money >= amount) {
                // ç®€åŒ–åšç©ºé€»è¾‘
                const profit = amount * (0.5 + Math.random() * 1);
                playerState.money += profit;
                gameStats.totalMoneyEarned += profit;
                
                showNotification(`ğŸ¯ åšç©º ${symbol} æˆåŠŸï¼ç›ˆåˆ© $${profit.toLocaleString()}`, "success");
                playSound('coinSound');
                
                updatePlayerStats();
                checkAchievement(11);
            } else {
                showNotification("èµ„é‡‘ä¸è¶³ï¼", "warning");
            }
        }
        
        // æŒ‰æ ‡ç­¾è¿‡æ»¤
        function filterByTag(tag) {
            renderGraveyard(tag);
            playSound('clickSound');
        }
        
        // æ”¾ç½®é¢„æµ‹
        function placePrediction(aiId, predictedDays) {
            gameStats.totalPredictions++;
            
            // ç®€åŒ–é¢„æµ‹é€»è¾‘
            const ai = livingAIs.find(a => a.id === aiId);
            if (ai) {
                const accuracy = Math.random();
                if (accuracy > 0.7) {
                    playerState.predictionScore += 20;
                    showNotification("ğŸ¯ é¢„æµ‹å‡†ç¡®ï¼çœ¼å…‰+20", "success");
                    playSound('successSound');
                    
                    // æ£€æŸ¥æˆå°±
                    if (playerState.predictionScore >= 80) {
                        checkAchievement(7);
                    }
                    
                    // æ£€æŸ¥è¿ç»­é¢„æµ‹
                    if (accuracy > 0.9) {
                        checkAchievement(18);
                    }
                } else {
                    playerState.predictionScore -= 10;
                    showNotification("âŒ é¢„æµ‹é”™è¯¯ï¼çœ¼å…‰-10", "warning");
                    playSound('failSound');
                }
                
                updatePlayerStats();
                closePredictionModal();
            }
        }
        
        // æŠ•èµ„ç»„åˆæ‘˜è¦
        function updatePortfolioSummary() {
            const container = document.getElementById('portfolioSummary');
            if (!container) return;
            
            let totalValue = playerState.money;
            let stockValue = 0;
            let stockCount = 0;
            
            for (const symbol in playerState.stocks) {
                const shares = playerState.stocks[symbol];
                if (shares > 0 && stockMarket.stocks[symbol]) {
                    const value = shares * stockMarket.stocks[symbol].price;
                    stockValue += value;
                    stockCount++;
                }
            }
            
            totalValue += stockValue;
            
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div style="background: rgba(0, 255, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: gold; font-size: 1.5rem; font-weight: bold;">$${totalValue.toLocaleString()}</div>
                        <div style="color: #aaaaff;">æ€»èµ„äº§</div>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: white; font-size: 1.5rem; font-weight: bold;">$${playerState.money.toLocaleString()}</div>
                        <div style="color: #aaaaff;">å¯ç”¨èµ„é‡‘</div>
                    </div>
                    <div style="background: rgba(255, 170, 0, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: #ffaa00; font-size: 1.5rem; font-weight: bold;">$${stockValue.toLocaleString()}</div>
                        <div style="color: #aaaaff;">è‚¡ç¥¨ä»·å€¼</div>
                    </div>
                    <div style="background: rgba(255, 0, 255, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="color: var(--neon-pink); font-size: 1.5rem; font-weight: bold;">${stockCount}</div>
                        <div style="color: #aaaaff;">æŒæœ‰è‚¡ç¥¨</div>
                    </div>
                </div>
            `;
        }
        
        // åˆå§‹åŒ–è‚¡ç¥¨åˆ—è¡¨å’ŒæŠ•èµ„ç»„åˆ
        renderStockList();
        updatePortfolioSummary();
        setInterval(updatePortfolioSummary, 5000);
        
        // æ¸¸æˆåˆå§‹åŒ–
        window.onload = initGame;
        
        // æ§åˆ¶å°å½©è›‹
        console.log(`%cğŸ¤– AIè½®å›æ¨¡æ‹Ÿå™¨ %c\nç‰ˆæœ¬: æ˜¥èŠ‚ç‰¹ä¾›ç‰ˆ v2.0\næˆå°±è¦ç´ : 20ä¸ª\nå…·èº«æ™ºèƒ½: å·²é›†æˆ\nå¤§ç©ºå¤´ç³»ç»Ÿ: å·²ä¸Šçº¿\nåˆ†äº«åŠŸèƒ½: å·²å°±ç»ª\n\nè¾“å…¥ showGameData() æŸ¥çœ‹æ¸¸æˆæ•°æ®`, 
            "color: #ff00ff; font-size: 20px; font-weight: bold; text-shadow: 0 0 10px #ff00ff;", 
            "color: #00ffff; font-size: 14px;");
    </script>
</body>
</html>
